"use strict";exports.id=20,exports.ids=[20],exports.modules={20:(_n,Ht,d)=>{d.d(Ht,{getDefaultRoleAssumer:()=>Ot,getDefaultRoleAssumerWithWebIdentity:()=>jt});var ce=d(15828),ae=d(38397),et=d(83192),r=d(19817);const Nt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),tt={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class b extends r.TJ{constructor(s){super(s),Object.setPrototypeOf(this,b.prototype)}}class de extends b{constructor(s){super({name:"ExpiredTokenException",$fault:"client",...s}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,de.prototype)}}class le extends b{constructor(s){super({name:"MalformedPolicyDocumentException",$fault:"client",...s}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class me extends b{constructor(s){super({name:"PackedPolicyTooLargeException",$fault:"client",...s}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,me.prototype)}}class ue extends b{constructor(s){super({name:"RegionDisabledException",$fault:"client",...s}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}class fe extends b{constructor(s){super({name:"IDPRejectedClaimException",$fault:"client",...s}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype)}}class he extends b{constructor(s){super({name:"InvalidIdentityTokenException",$fault:"client",...s}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}class ye extends b{constructor(s){super({name:"IDPCommunicationErrorException",$fault:"client",...s}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,ye.prototype)}}class ge extends b{constructor(s){super({name:"InvalidAuthorizationMessageException",$fault:"client",...s}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,ge.prototype)}}const Y=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:r.$H}}),Bt=e=>({...e,...e.Credentials&&{Credentials:Y(e.Credentials)}}),xn=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:SENSITIVE_STRING}}),bn=e=>({...e,...e.Credentials&&{Credentials:Y(e.Credentials)}}),Vt=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:r.$H}}),Zt=e=>({...e,...e.Credentials&&{Credentials:Y(e.Credentials)}}),Tn=e=>({...e,...e.Credentials&&{Credentials:Y(e.Credentials)}}),wn=e=>({...e,...e.Credentials&&{Credentials:Y(e.Credentials)}});var Xt=d(12763),Qt=d(92634);const Ae=(e,s)=>(0,Qt.w)(e,s).then(t=>{if(t.length){const n=new Xt.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(E,C)=>C.trim()===""&&C.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(t,!0)}catch(E){throw E&&typeof E=="object"&&Object.defineProperty(E,"$responseBodyText",{value:t}),E}const a="#text",i=Object.keys(o)[0],h=o[i];return h[a]&&(h[i]=h[a],delete h[a]),(0,r.rm)(h)}return{}}),Jt=async(e,s)=>{const t=await Ae(e,s);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},Dn=(e,s)=>{if(s?.Error?.Code!==void 0)return s.Error.Code;if(s?.Code!==void 0)return s.Code;if(e.statusCode==404)return"NotFound"};var Se=d(50961);const Yt=async(e,s)=>{const t=K;let n;return n=L({...ls(e,s),[z]:Us,[F]:k}),M(s,t,"/",void 0,n)},Wn=async(e,s)=>{const t=K;let n;return n=L({...ms(e,s),[z]:Os,[F]:k}),M(s,t,"/",void 0,n)},qt=async(e,s)=>{const t=K;let n;return n=L({...us(e,s),[z]:js,[F]:k}),M(s,t,"/",void 0,n)},$n=async(e,s)=>{const t=K;let n;return n=L({...fs(e,s),[z]:Hs,[F]:k}),M(s,t,"/",void 0,n)},Mn=async(e,s)=>{const t=K;let n;return n=L({...hs(e,s),[z]:Ns,[F]:k}),M(s,t,"/",void 0,n)},Kn=async(e,s)=>{const t=K;let n;return n=L({...ys(e,s),[z]:Bs,[F]:k}),M(s,t,"/",void 0,n)},kn=async(e,s)=>{const t=K;let n;return n=L({...gs(e,s),[z]:Vs,[F]:k}),M(s,t,"/",void 0,n)},zn=async(e,s)=>{const t=K;let n;return n=L({...As(e,s),[z]:Zs,[F]:k}),M(s,t,"/",void 0,n)},es=async(e,s)=>{if(e.statusCode>=300)return $(e,s);const t=await Ae(e.body,s);let n={};return n=Cs(t.AssumeRoleResult,s),{$metadata:A(e),...n}},Fn=async(e,s)=>{if(e.statusCode>=300)return $(e,s);const t=await parseBody(e.body,s);let n={};return n=vs(t.AssumeRoleWithSAMLResult,s),{$metadata:A(e),...n}},ts=async(e,s)=>{if(e.statusCode>=300)return $(e,s);const t=await Ae(e.body,s);let n={};return n=Ps(t.AssumeRoleWithWebIdentityResult,s),{$metadata:A(e),...n}},Ln=async(e,s)=>{if(e.statusCode>=300)return $(e,s);const t=await parseBody(e.body,s);let n={};return n=_s(t.DecodeAuthorizationMessageResult,s),{$metadata:A(e),...n}},Gn=async(e,s)=>{if(e.statusCode>=300)return $(e,s);const t=await parseBody(e.body,s);let n={};return n=Ts(t.GetAccessKeyInfoResult,s),{$metadata:A(e),...n}},Un=async(e,s)=>{if(e.statusCode>=300)return $(e,s);const t=await parseBody(e.body,s);let n={};return n=ws(t.GetCallerIdentityResult,s),{$metadata:A(e),...n}},On=async(e,s)=>{if(e.statusCode>=300)return $(e,s);const t=await parseBody(e.body,s);let n={};return n=Ds(t.GetFederationTokenResult,s),{$metadata:A(e),...n}},jn=async(e,s)=>{if(e.statusCode>=300)return $(e,s);const t=await parseBody(e.body,s);let n={};return n=Ws(t.GetSessionTokenResult,s),{$metadata:A(e),...n}},$=async(e,s)=>{const t={...e,body:await Jt(e.body,s)},n=Xs(e,t.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await ss(t,s);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await cs(t,s);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await as(t,s);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ds(t,s);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await os(t,s);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await is(t,s);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await ns(t,s);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await rs(t,s);default:const o=t.body;return Gs({output:e,parsedBody:o.Error,errorCode:n})}},ss=async(e,s)=>{const t=e.body,n=xs(t.Error,s),o=new de({$metadata:A(e),...n});return(0,r.Mw)(o,t)},ns=async(e,s)=>{const t=e.body,n=$s(t.Error,s),o=new ye({$metadata:A(e),...n});return(0,r.Mw)(o,t)},os=async(e,s)=>{const t=e.body,n=Ms(t.Error,s),o=new fe({$metadata:A(e),...n});return(0,r.Mw)(o,t)},rs=async(e,s)=>{const t=e.body,n=Ks(t.Error,s),o=new ge({$metadata:A(e),...n});return(0,r.Mw)(o,t)},is=async(e,s)=>{const t=e.body,n=ks(t.Error,s),o=new he({$metadata:A(e),...n});return(0,r.Mw)(o,t)},cs=async(e,s)=>{const t=e.body,n=zs(t.Error,s),o=new le({$metadata:A(e),...n});return(0,r.Mw)(o,t)},as=async(e,s)=>{const t=e.body,n=Fs(t.Error,s),o=new me({$metadata:A(e),...n});return(0,r.Mw)(o,t)},ds=async(e,s)=>{const t=e.body,n=Ls(t.Error,s),o=new ue({$metadata:A(e),...n});return(0,r.Mw)(o,t)},ls=(e,s)=>{const t={};if(e[W]!=null&&(t[W]=e[W]),e[B]!=null&&(t[B]=e[B]),e[P]!=null){const n=ne(e[P],s);e[P]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}if(e[v]!=null&&(t[v]=e[v]),e[I]!=null&&(t[I]=e[I]),e[Z]!=null){const n=st(e[Z],s);e[Z]?.length===0&&(t.Tags=[]),Object.entries(n).forEach(([o,a])=>{const i=`Tags.${o}`;t[i]=a})}if(e[je]!=null){const n=ps(e[je],s);e[je]?.length===0&&(t.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,a])=>{const i=`TransitiveTagKeys.${o}`;t[i]=a})}if(e[ve]!=null&&(t[ve]=e[ve]),e[V]!=null&&(t[V]=e[V]),e[X]!=null&&(t[X]=e[X]),e[x]!=null&&(t[x]=e[x]),e[Me]!=null){const n=Rs(e[Me],s);e[Me]?.length===0&&(t.ProvidedContexts=[]),Object.entries(n).forEach(([o,a])=>{const i=`ProvidedContexts.${o}`;t[i]=a})}return t},ms=(e,s)=>{const t={};if(e[W]!=null&&(t[W]=e[W]),e[We]!=null&&(t[We]=e[We]),e[Le]!=null&&(t[Le]=e[Le]),e[P]!=null){const n=ne(e[P],s);e[P]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}return e[v]!=null&&(t[v]=e[v]),e[I]!=null&&(t[I]=e[I]),t},us=(e,s)=>{const t={};if(e[W]!=null&&(t[W]=e[W]),e[B]!=null&&(t[B]=e[B]),e[Be]!=null&&(t[Be]=e[Be]),e[Ke]!=null&&(t[Ke]=e[Ke]),e[P]!=null){const n=ne(e[P],s);e[P]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}return e[v]!=null&&(t[v]=e[v]),e[I]!=null&&(t[I]=e[I]),t},fs=(e,s)=>{const t={};return e[Pe]!=null&&(t[Pe]=e[Pe]),t},hs=(e,s)=>{const t={};return e[j]!=null&&(t[j]=e[j]),t},ys=(e,s)=>({}),gs=(e,s)=>{const t={};if(e[we]!=null&&(t[we]=e[we]),e[v]!=null&&(t[v]=e[v]),e[P]!=null){const n=ne(e[P],s);e[P]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}if(e[I]!=null&&(t[I]=e[I]),e[Z]!=null){const n=st(e[Z],s);e[Z]?.length===0&&(t.Tags=[]),Object.entries(n).forEach(([o,a])=>{const i=`Tags.${o}`;t[i]=a})}return t},As=(e,s)=>{const t={};return e[I]!=null&&(t[I]=e[I]),e[V]!=null&&(t[V]=e[V]),e[X]!=null&&(t[X]=e[X]),t},ne=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const a=Ss(o,s);Object.entries(a).forEach(([i,h])=>{t[`member.${n}.${i}`]=h}),n++}return t},Ss=(e,s)=>{const t={};return e[Ve]!=null&&(t[Ve]=e[Ve]),t},Es=(e,s)=>{const t={};return e[$e]!=null&&(t[$e]=e[$e]),e[Ie]!=null&&(t[Ie]=e[Ie]),t},Rs=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const a=Es(o,s);Object.entries(a).forEach(([i,h])=>{t[`member.${n}.${i}`]=h}),n++}return t},Is=(e,s)=>{const t={};return e[Te]!=null&&(t[Te]=e[Te]),e[Ne]!=null&&(t[Ne]=e[Ne]),t},ps=(e,s)=>{const t={};let n=1;for(const o of e)o!==null&&(t[`member.${n}`]=o,n++);return t},st=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const a=Is(o,s);Object.entries(a).forEach(([i,h])=>{t[`member.${n}.${i}`]=h}),n++}return t},Ee=(e,s)=>{const t={};return e[Re]!=null&&(t[Re]=(0,r.lK)(e[Re])),e[D]!=null&&(t[D]=(0,r.lK)(e[D])),t},Cs=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),e[w]!=null&&(t[w]=Ee(e[w],s)),e[_]!=null&&(t[_]=(0,r.xW)(e[_])),e[x]!=null&&(t[x]=(0,r.lK)(e[x])),t},vs=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),e[w]!=null&&(t[w]=Ee(e[w],s)),e[_]!=null&&(t[_]=__strictParseInt32(e[_])),e[ze]!=null&&(t[ze]=__expectString(e[ze])),e[Ue]!=null&&(t[Ue]=__expectString(e[Ue])),e[be]!=null&&(t[be]=__expectString(e[be])),e[N]!=null&&(t[N]=__expectString(e[N])),e[De]!=null&&(t[De]=__expectString(e[De])),e[x]!=null&&(t[x]=__expectString(e[x])),t},Ps=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),e[Ge]!=null&&(t[Ge]=(0,r.lK)(e[Ge])),e[w]!=null&&(t[w]=Ee(e[w],s)),e[_]!=null&&(t[_]=(0,r.xW)(e[_])),e[ke]!=null&&(t[ke]=(0,r.lK)(e[ke])),e[N]!=null&&(t[N]=(0,r.lK)(e[N])),e[x]!=null&&(t[x]=(0,r.lK)(e[x])),t},q=(e,s)=>{const t={};return e[j]!=null&&(t[j]=(0,r.lK)(e[j])),e[Fe]!=null&&(t[Fe]=(0,r.lK)(e[Fe])),e[Oe]!=null&&(t[Oe]=(0,r.lK)(e[Oe])),e[Ce]!=null&&(t[Ce]=(0,r.Y0)((0,r.t_)(e[Ce]))),t},_s=(e,s)=>{const t={};return e[pe]!=null&&(t[pe]=__expectString(e[pe])),t},xs=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,r.lK)(e[u])),t},bs=(e,s)=>{const t={};return e[xe]!=null&&(t[xe]=__expectString(e[xe])),e[D]!=null&&(t[D]=__expectString(e[D])),t},Ts=(e,s)=>{const t={};return e[H]!=null&&(t[H]=__expectString(e[H])),t},ws=(e,s)=>{const t={};return e[He]!=null&&(t[He]=__expectString(e[He])),e[H]!=null&&(t[H]=__expectString(e[H])),e[D]!=null&&(t[D]=__expectString(e[D])),t},Ds=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),e[_e]!=null&&(t[_e]=bs(e[_e],s)),e[_]!=null&&(t[_]=__strictParseInt32(e[_])),t},Ws=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),t},$s=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,r.lK)(e[u])),t},Ms=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,r.lK)(e[u])),t},Ks=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,r.lK)(e[u])),t},ks=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,r.lK)(e[u])),t},zs=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,r.lK)(e[u])),t},Fs=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,r.lK)(e[u])),t},Ls=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,r.lK)(e[u])),t},A=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Hn=(e,s)=>collectBody(e,s).then(t=>s.utf8Encoder(t)),Gs=(0,r.jr)(b),M=async(e,s,t,n,o)=>{const{hostname:a,protocol:i="https",port:h,path:E}=await e.endpoint(),C={protocol:i,hostname:a,port:h,method:"POST",path:E.endsWith("/")?E.slice(0,-1)+t:E+t,headers:s};return n!==void 0&&(C.hostname=n),o!==void 0&&(C.body=o),new Se.Kd(C)},K={"content-type":"application/x-www-form-urlencoded"},k="2011-06-15",z="Action",j="AccessKeyId",Us="AssumeRole",Re="AssumedRoleId",w="AssumedRoleUser",Os="AssumeRoleWithSAML",js="AssumeRoleWithWebIdentity",H="Account",D="Arn",N="Audience",R="Credentials",Ie="ContextAssertion",Hs="DecodeAuthorizationMessage",pe="DecodedMessage",I="DurationSeconds",Ce="Expiration",ve="ExternalId",Pe="EncodedMessage",_e="FederatedUser",xe="FederatedUserId",Ns="GetAccessKeyInfo",Bs="GetCallerIdentity",Vs="GetFederationToken",Zs="GetSessionToken",be="Issuer",Te="Key",we="Name",De="NameQualifier",v="Policy",P="PolicyArns",We="PrincipalArn",$e="ProviderArn",Me="ProvidedContexts",Ke="ProviderId",_="PackedPolicySize",ke="Provider",W="RoleArn",B="RoleSessionName",ze="Subject",Fe="SecretAccessKey",Le="SAMLAssertion",Ge="SubjectFromWebIdentityToken",x="SourceIdentity",V="SerialNumber",Ue="SubjectType",Oe="SessionToken",Z="Tags",X="TokenCode",je="TransitiveTagKeys",He="UserId",F="Version",Ne="Value",Be="WebIdentityToken",Ve="arn",u="message",L=e=>Object.entries(e).map(([s,t])=>(0,r.$6)(s)+"="+(0,r.$6)(t)).join("&"),Xs=(e,s)=>{if(s.Error?.Code!==void 0)return s.Error.Code;if(e.statusCode==404)return"NotFound"};class Qs extends r.uB.classBuilder().ep(tt).m(function(s,t,n,o){return[(0,et.TM)(n,this.serialize,this.deserialize),(0,ae.rD)(n,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Bt).ser(Yt).de(es).build(){}class Js extends r.uB.classBuilder().ep(tt).m(function(s,t,n,o){return[(0,et.TM)(n,this.serialize,this.deserialize),(0,ae.rD)(n,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Vt,Zt).ser(qt).de(ts).build(){}const nt="us-east-1",ot=e=>{if(typeof e?.Arn=="string"){const s=e.Arn.split(":");if(s.length>4&&s[4]!=="")return s[4]}},rt=async(e,s,t)=>{const n=typeof e=="function"?await e():e,o=typeof s=="function"?await s():s;return t?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${nt} (STS default)`),n??o??nt},it=(e,s)=>{let t,n;return async(o,a)=>{if(n=o,!t){const{logger:O=e?.parentClientConfig?.logger,region:se,requestHandler:ie=e?.parentClientConfig?.requestHandler,credentialProviderLogger:qe}=e,vn=await rt(se,e?.parentClientConfig?.region,qe),Pn=!at(ie);t=new s({credentialDefaultProvider:()=>async()=>n,region:vn,requestHandler:Pn?ie:void 0,logger:O})}const{Credentials:i,AssumedRoleUser:h}=await t.send(new Qs(a));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);const E=ot(h),C={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...E&&{accountId:E}};return(0,ce.g)(C,"CREDENTIALS_STS_ASSUME_ROLE","i"),C}},ct=(e,s)=>{let t;return async n=>{if(!t){const{logger:E=e?.parentClientConfig?.logger,region:C,requestHandler:O=e?.parentClientConfig?.requestHandler,credentialProviderLogger:se}=e,ie=await rt(C,e?.parentClientConfig?.region,se),qe=!at(O);t=new s({region:ie,requestHandler:qe?O:void 0,logger:E})}const{Credentials:o,AssumedRoleUser:a}=await t.send(new Js(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);const i=ot(a),h={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}};return i&&(0,ce.g)(h,"RESOLVED_ACCOUNT_ID","T"),(0,ce.g)(h,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),h}},Nn=e=>s=>e({roleAssumer:it(s,s.stsClientCtor),roleAssumerWithWebIdentity:ct(s,s.stsClientCtor),...s}),at=e=>e?.metadata?.handlerProtocol==="h2";var dt=d(25607),Ys=d(14847),qs=d(89305),lt=d(99281),ee=d(42706),te=d(30196),en=d(53188),oe=d(99450),tn=d(66853),mt=d(30015);const sn=async(e,s,t)=>({operation:(0,mt.u)(s).operation,region:await(0,mt.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function nn(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function ut(e){return{schemeId:"smithy.api#noAuth"}}const on=e=>{const s=[];switch(e.operation){case"AssumeRoleWithSAML":{s.push(ut(e));break}case"AssumeRoleWithWebIdentity":{s.push(ut(e));break}default:s.push(nn(e))}return s},rn=e=>({...e,stsClientCtor:Ye}),cn=e=>{const s=rn(e);return{...(0,tn.h)(s)}},an={rE:"3.682.0"};var dn=d(99842),ft=d(90628),ht=d(84017),yt=d(17671),ln=d(51461),Q=d(16435),gt=d(37759),mn=d(88226),un=d(79227),fn=d(34833),At=d(53228),St=d(3021),hn=d(75292),Ze=d(76976);const Et="required",c="type",l="fn",m="argv",G="ref",Rt=!1,Xe=!0,U="booleanEquals",y="stringEquals",It="sigv4",pt="sts",Ct="us-east-1",f="endpoint",vt="https://sts.{Region}.{PartitionResult#dnsSuffix}",T="tree",J="error",Qe="getAttr",Pt={[Et]:!1,[c]:"String"},Je={[Et]:!0,default:!1,[c]:"Boolean"},_t={[G]:"Endpoint"},xt={[l]:"isSet",[m]:[{[G]:"Region"}]},g={[G]:"Region"},bt={[l]:"aws.partition",[m]:[g],assign:"PartitionResult"},Tt={[G]:"UseFIPS"},wt={[G]:"UseDualStack"},S={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:It,signingName:pt,signingRegion:Ct}]},headers:{}},p={},Dt={conditions:[{[l]:y,[m]:[g,"aws-global"]}],[f]:S,[c]:f},Wt={[l]:U,[m]:[Tt,!0]},$t={[l]:U,[m]:[wt,!0]},Mt={[l]:Qe,[m]:[{[G]:"PartitionResult"},"supportsFIPS"]},Kt={[G]:"PartitionResult"},kt={[l]:U,[m]:[!0,{[l]:Qe,[m]:[Kt,"supportsDualStack"]}]},zt=[{[l]:"isSet",[m]:[_t]}],Ft=[Wt],Lt=[$t],yn={version:"1.0",parameters:{Region:Pt,UseDualStack:Je,UseFIPS:Je,Endpoint:Pt,UseGlobalEndpoint:Je},rules:[{conditions:[{[l]:U,[m]:[{[G]:"UseGlobalEndpoint"},Xe]},{[l]:"not",[m]:zt},xt,bt,{[l]:U,[m]:[Tt,Rt]},{[l]:U,[m]:[wt,Rt]}],rules:[{conditions:[{[l]:y,[m]:[g,"ap-northeast-1"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"ap-south-1"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"ap-southeast-1"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"ap-southeast-2"]}],endpoint:S,[c]:f},Dt,{conditions:[{[l]:y,[m]:[g,"ca-central-1"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"eu-central-1"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"eu-north-1"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"eu-west-1"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"eu-west-2"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"eu-west-3"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"sa-east-1"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,Ct]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"us-east-2"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"us-west-1"]}],endpoint:S,[c]:f},{conditions:[{[l]:y,[m]:[g,"us-west-2"]}],endpoint:S,[c]:f},{endpoint:{url:vt,properties:{authSchemes:[{name:It,signingName:pt,signingRegion:"{Region}"}]},headers:p},[c]:f}],[c]:T},{conditions:zt,rules:[{conditions:Ft,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[c]:J},{conditions:Lt,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[c]:J},{endpoint:{url:_t,properties:p,headers:p},[c]:f}],[c]:T},{conditions:[xt],rules:[{conditions:[bt],rules:[{conditions:[Wt,$t],rules:[{conditions:[{[l]:U,[m]:[Xe,Mt]},kt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:p,headers:p},[c]:f}],[c]:T},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[c]:J}],[c]:T},{conditions:Ft,rules:[{conditions:[{[l]:U,[m]:[Mt,Xe]}],rules:[{conditions:[{[l]:y,[m]:[{[l]:Qe,[m]:[Kt,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:p,headers:p},[c]:f},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:p,headers:p},[c]:f}],[c]:T},{error:"FIPS is enabled but this partition does not support FIPS",[c]:J}],[c]:T},{conditions:Lt,rules:[{conditions:[kt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:p,headers:p},[c]:f}],[c]:T},{error:"DualStack is enabled but this partition does not support DualStack",[c]:J}],[c]:T},Dt,{endpoint:{url:vt,properties:p,headers:p},[c]:f}],[c]:T}],[c]:T},{error:"Invalid Configuration: Missing Region",[c]:J}]},gn=new Ze.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),An=(e,s={})=>gn.get(e,()=>(0,Ze.sO)(yn,{endpointParams:e,logger:s.logger}));Ze.mw.aws=hn.UF;const Sn=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??At.E,base64Encoder:e?.base64Encoder??At.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??An,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??on,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new ft.f2},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],logger:e?.logger??new r.N4,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??fn.D,utf8Decoder:e?.utf8Decoder??St.ar,utf8Encoder:e?.utf8Encoder??St.Pq});var En=d(78075);const Rn=e=>{(0,r.I9)(process.version);const s=(0,En.I)(e),t=()=>s().then(r.lT),n=Sn(e);return(0,dn.I)(process.version),{...n,...e,runtime:"node",defaultsMode:s,bodyLengthChecker:e?.bodyLengthChecker??mn.n,credentialDefaultProvider:e?.credentialDefaultProvider??ht.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,yt.pf)({serviceId:n.serviceId,clientVersion:an.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async a=>await(0,ht.v6)(a?.__config||{})()),signer:new ft.f2},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],maxAttempts:e?.maxAttempts??(0,Q.Z)(oe.qs),region:e?.region??(0,Q.Z)(ee.GG,ee.zH),requestHandler:gt.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,Q.Z)({...oe.kN,default:async()=>(await t()).retryMode||un.L0}),sha256:e?.sha256??ln.V.bind(null,"sha256"),streamCollector:e?.streamCollector??gt.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Q.Z)(ee.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,Q.Z)(ee.Ko),userAgentAppId:e?.userAgentAppId??(0,Q.Z)(yt.hV)}};var Gt=d(37760);const In=e=>{const s=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const a=s.findIndex(i=>i.schemeId===o.schemeId);a===-1?s.push(o):s.splice(a,1,o)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){n=o},credentials(){return n}}},pn=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),re=e=>e,Cn=(e,s)=>{const t={...re((0,Gt.Rq)(e)),...re((0,r.xA)(e)),...re((0,Se.eS)(e)),...re(In(e))};return s.forEach(n=>n.configure(t)),{...e,...(0,Gt.$3)(t),...(0,r.uv)(t),...(0,Se.jt)(t),...pn(t)}};class Ye extends r.Kj{constructor(...[s]){const t=Rn(s||{}),n=Nt(t),o=(0,lt.Dc)(n),a=(0,oe.$z)(o),i=(0,ee.TD)(a),h=(0,dt.OV)(i),E=(0,ae.Co)(h),C=cn(E),O=Cn(C,s?.extensions||[]);super(O),this.config=O,this.middlewareStack.use((0,lt.sM)(this.config)),this.middlewareStack.use((0,oe.ey)(this.config)),this.middlewareStack.use((0,en.vK)(this.config)),this.middlewareStack.use((0,dt.TC)(this.config)),this.middlewareStack.use((0,Ys.Y7)(this.config)),this.middlewareStack.use((0,qs.n4)(this.config)),this.middlewareStack.use((0,te.wB)(this.config,{httpAuthSchemeParametersProvider:sn,identityProviderConfigProvider:async se=>new te.h$({"aws.auth#sigv4":se.credentials})})),this.middlewareStack.use((0,te.lW)(this.config))}destroy(){super.destroy()}}const Ut=(e,s)=>s?class extends e{constructor(n){super(n);for(const o of s)this.middlewareStack.use(o)}}:e,Ot=(e={},s)=>it(e,Ut(Ye,s)),jt=(e={},s)=>ct(e,Ut(Ye,s)),Vn=e=>s=>e({roleAssumer:Ot(s),roleAssumerWithWebIdentity:jt(s),...s})}};
