"use strict";exports.id=222,exports.ids=[222],exports.modules={77222:(xt,ye,c)=>{c.d(ye,{CreateTokenCommand:()=>ht,SSOOIDCClient:()=>He});var H=c(25607),Se=c(14847),xe=c(89305),B=c(99281),v=c(42706),g=c(30196),ve=c(53188),L=c(38397),f=c(99450),s=c(19817),ge=c(66853),J=c(30015);const Ee=async(e,t,n)=>({operation:(0,J.u)(t).operation,region:await(0,J.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Ie(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function b(e){return{schemeId:"smithy.api#noAuth"}}const fe=e=>{const t=[];switch(e.operation){case"CreateToken":{t.push(b(e));break}case"RegisterClient":{t.push(b(e));break}case"StartDeviceAuthorization":{t.push(b(e));break}default:t.push(Ie(e))}return t},Te=e=>({...(0,ge.h)(e)}),we=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),be={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Ce={rE:"3.682.0"};var _e=c(99842),Pe=c(84017),W=c(17671),Re=c(51461),m=c(16435),Z=c(37759),ke=c(88226),Ae=c(79227),$e=c(90628),je=c(34833),Y=c(53228),X=c(3021),Oe=c(75292),C=c(76976);const Q="required",l="fn",p="argv",y="ref",q=!0,ee="isSet",E="booleanEquals",S="error",x="endpoint",u="tree",_="PartitionResult",P="getAttr",te={[Q]:!1,type:"String"},ne={[Q]:!0,default:!1,type:"Boolean"},se={[y]:"Endpoint"},oe={[l]:E,[p]:[{[y]:"UseFIPS"},!0]},re={[l]:E,[p]:[{[y]:"UseDualStack"},!0]},h={},ie={[l]:P,[p]:[{[y]:_},"supportsFIPS"]},ce={[y]:_},ae={[l]:E,[p]:[!0,{[l]:P,[p]:[ce,"supportsDualStack"]}]},de=[oe],le=[re],pe=[{[y]:"Region"}],De={version:"1.0",parameters:{Region:te,UseDualStack:ne,UseFIPS:ne,Endpoint:te},rules:[{conditions:[{[l]:ee,[p]:[se]}],rules:[{conditions:de,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:S},{conditions:le,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:S},{endpoint:{url:se,properties:h,headers:h},type:x}],type:u},{conditions:[{[l]:ee,[p]:pe}],rules:[{conditions:[{[l]:"aws.partition",[p]:pe,assign:_}],rules:[{conditions:[oe,re],rules:[{conditions:[{[l]:E,[p]:[q,ie]},ae],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:h,headers:h},type:x}],type:u},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:S}],type:u},{conditions:de,rules:[{conditions:[{[l]:E,[p]:[ie,q]}],rules:[{conditions:[{[l]:"stringEquals",[p]:[{[l]:P,[p]:[ce,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:h,headers:h},type:x},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:h,headers:h},type:x}],type:u},{error:"FIPS is enabled but this partition does not support FIPS",type:S}],type:u},{conditions:le,rules:[{conditions:[ae],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:h,headers:h},type:x}],type:u},{error:"DualStack is enabled but this partition does not support DualStack",type:S}],type:u},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:h,headers:h},type:x}],type:u}],type:u},{error:"Invalid Configuration: Missing Region",type:S}]},ze=new C.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ke=(e,t={})=>ze.get(e,()=>(0,C.sO)(De,{endpointParams:e,logger:t.logger}));C.mw.aws=Oe.UF;const Ue=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Y.E,base64Encoder:e?.base64Encoder??Y.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ke,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??fe,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new $e.f2},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new g.mR}],logger:e?.logger??new s.N4,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??je.D,utf8Decoder:e?.utf8Decoder??X.ar,utf8Encoder:e?.utf8Encoder??X.Pq});var Ne=c(78075);const Me=e=>{(0,s.I9)(process.version);const t=(0,Ne.I)(e),n=()=>t().then(s.lT),o=Ue(e);return(0,_e.I)(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??ke.n,credentialDefaultProvider:e?.credentialDefaultProvider??Pe.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,W.pf)({serviceId:o.serviceId,clientVersion:Ce.rE}),maxAttempts:e?.maxAttempts??(0,m.Z)(f.qs),region:e?.region??(0,m.Z)(v.GG,v.zH),requestHandler:Z.$c.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,m.Z)({...f.kN,default:async()=>(await n()).retryMode||Ae.L0}),sha256:e?.sha256??Re.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Z.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,m.Z)(v.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,m.Z)(v.Ko),userAgentAppId:e?.userAgentAppId??(0,m.Z)(W.hV)}};var he=c(37760),ue=c(50961);const Ve=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(r){const i=t.findIndex(I=>I.schemeId===r.schemeId);i===-1?t.push(r):t.splice(i,1,r)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(r){n=r},httpAuthSchemeProvider(){return n},setCredentials(r){o=r},credentials(){return o}}},Ge=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),T=e=>e,Fe=(e,t)=>{const n={...T((0,he.Rq)(e)),...T((0,s.xA)(e)),...T((0,ue.eS)(e)),...T(Ve(e))};return t.forEach(o=>o.configure(n)),{...e,...(0,he.$3)(n),...(0,s.uv)(n),...(0,ue.jt)(n),...Ge(n)}};class He extends s.Kj{constructor(...[t]){const n=Me(t||{}),o=we(n),r=(0,B.Dc)(o),i=(0,f.$z)(r),I=(0,v.TD)(i),ut=(0,H.OV)(I),mt=(0,L.Co)(ut),yt=Te(mt),me=Fe(yt,t?.extensions||[]);super(me),this.config=me,this.middlewareStack.use((0,B.sM)(this.config)),this.middlewareStack.use((0,f.ey)(this.config)),this.middlewareStack.use((0,ve.vK)(this.config)),this.middlewareStack.use((0,H.TC)(this.config)),this.middlewareStack.use((0,Se.Y7)(this.config)),this.middlewareStack.use((0,xe.n4)(this.config)),this.middlewareStack.use((0,g.wB)(this.config,{httpAuthSchemeParametersProvider:Ee,identityProviderConfigProvider:async St=>new g.h$({"aws.auth#sigv4":St.credentials})})),this.middlewareStack.use((0,g.lW)(this.config))}destroy(){super.destroy()}}var Be=c(83192);class d extends s.TJ{constructor(t){super(t),Object.setPrototypeOf(this,d.prototype)}}class R extends d{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,R.prototype),this.error=t.error,this.error_description=t.error_description}}class k extends d{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,k.prototype),this.error=t.error,this.error_description=t.error_description}}class A extends d{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,A.prototype),this.error=t.error,this.error_description=t.error_description}}class $ extends d{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,$.prototype),this.error=t.error,this.error_description=t.error_description}}class j extends d{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,j.prototype),this.error=t.error,this.error_description=t.error_description}}class O extends d{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,O.prototype),this.error=t.error,this.error_description=t.error_description}}class D extends d{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,D.prototype),this.error=t.error,this.error_description=t.error_description}}class z extends d{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,z.prototype),this.error=t.error,this.error_description=t.error_description}}class K extends d{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,K.prototype),this.error=t.error,this.error_description=t.error_description}}class U extends d{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,U.prototype),this.error=t.error,this.error_description=t.error_description}}class N extends d{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,N.prototype),this.error=t.error,this.error_description=t.error_description}}class M extends d{constructor(t){super({name:"InvalidRequestRegionException",$fault:"client",...t}),this.name="InvalidRequestRegionException",this.$fault="client",Object.setPrototypeOf(this,M.prototype),this.error=t.error,this.error_description=t.error_description,this.endpoint=t.endpoint,this.region=t.region}}class V extends d{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,V.prototype),this.error=t.error,this.error_description=t.error_description}}class G extends d{constructor(t){super({name:"InvalidRedirectUriException",$fault:"client",...t}),this.name="InvalidRedirectUriException",this.$fault="client",Object.setPrototypeOf(this,G.prototype),this.error=t.error,this.error_description=t.error_description}}const Le=e=>({...e,...e.clientSecret&&{clientSecret:s.$H},...e.refreshToken&&{refreshToken:s.$H},...e.codeVerifier&&{codeVerifier:s.$H}}),Je=e=>({...e,...e.accessToken&&{accessToken:s.$H},...e.refreshToken&&{refreshToken:s.$H},...e.idToken&&{idToken:s.$H}}),gt=e=>({...e,...e.refreshToken&&{refreshToken:SENSITIVE_STRING},...e.assertion&&{assertion:SENSITIVE_STRING},...e.subjectToken&&{subjectToken:SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:SENSITIVE_STRING}}),Et=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING},...e.refreshToken&&{refreshToken:SENSITIVE_STRING},...e.idToken&&{idToken:SENSITIVE_STRING}}),It=e=>({...e,...e.clientSecret&&{clientSecret:SENSITIVE_STRING}}),ft=e=>({...e,...e.clientSecret&&{clientSecret:SENSITIVE_STRING}});var F=c(27007);const We=async(e,t)=>{const n=(0,g.lI)(e,t),o={"content-type":"application/json"};n.bp("/token");let r;return r=JSON.stringify((0,s.s)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:i=>(0,s.Ss)(i)})),n.m("POST").h(o).b(r),n.build()},Tt=async(e,t)=>{const n=rb(e,t),o={"content-type":"application/json"};n.bp("/token");const r=map({[pt]:[,"t"]});let i;return i=JSON.stringify(take(e,{assertion:[],clientId:[],code:[],codeVerifier:[],grantType:[],redirectUri:[],refreshToken:[],requestedTokenType:[],scope:I=>_json(I),subjectToken:[],subjectTokenType:[]})),n.m("POST").h(o).q(r).b(i),n.build()},wt=async(e,t)=>{const n=rb(e,t),o={"content-type":"application/json"};n.bp("/client/register");let r;return r=JSON.stringify(take(e,{clientName:[],clientType:[],entitledApplicationArn:[],grantTypes:i=>_json(i),issuerUrl:[],redirectUris:i=>_json(i),scopes:i=>_json(i)})),n.m("POST").h(o).b(r),n.build()},bt=async(e,t)=>{const n=rb(e,t),o={"content-type":"application/json"};n.bp("/device_authorization");let r;return r=JSON.stringify(take(e,{clientId:[],clientSecret:[],startUrl:[]})),n.m("POST").h(o).b(r),n.build()},Ze=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return w(e,t);const n=(0,s.Tj)({$metadata:a(e)}),o=(0,s.Y0)((0,s.Xk)(await(0,F.Y2)(e.body,t)),"body"),r=(0,s.s)(o,{accessToken:s.lK,expiresIn:s.ET,idToken:s.lK,refreshToken:s.lK,tokenType:s.lK});return Object.assign(n,r),n},Ct=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return w(e,t);const n=map({$metadata:a(e)}),o=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(o,{accessToken:__expectString,expiresIn:__expectInt32,idToken:__expectString,issuedTokenType:__expectString,refreshToken:__expectString,scope:_json,tokenType:__expectString});return Object.assign(n,r),n},_t=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return w(e,t);const n=map({$metadata:a(e)}),o=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(o,{authorizationEndpoint:__expectString,clientId:__expectString,clientIdIssuedAt:__expectLong,clientSecret:__expectString,clientSecretExpiresAt:__expectLong,tokenEndpoint:__expectString});return Object.assign(n,r),n},Pt=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return w(e,t);const n=map({$metadata:a(e)}),o=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(o,{deviceCode:__expectString,expiresIn:__expectInt32,interval:__expectInt32,userCode:__expectString,verificationUri:__expectString,verificationUriComplete:__expectString});return Object.assign(n,r),n},w=async(e,t)=>{const n={...e,body:await(0,F.CG)(e.body,t)},o=(0,F.cJ)(e,n.body);switch(o){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Xe(n,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await Qe(n,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await qe(n,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await et(n,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await tt(n,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await st(n,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await rt(n,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await ct(n,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await at(n,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await dt(n,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await lt(n,t);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await it(n,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await nt(n,t);case"InvalidRedirectUriException":case"com.amazonaws.ssooidc#InvalidRedirectUriException":throw await ot(n,t);default:const r=n.body;return Ye({output:e,parsedBody:r,errorCode:o})}},Ye=(0,s.jr)(d),Xe=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new R({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},Qe=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new k({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},qe=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new A({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},et=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new $({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},tt=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new j({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},nt=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new V({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},st=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new O({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},ot=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new G({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},rt=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new D({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},it=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{endpoint:s.lK,error:s.lK,error_description:s.lK,region:s.lK});Object.assign(n,r);const i=new M({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},ct=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new z({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},at=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new K({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},dt=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new U({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},lt=async(e,t)=>{const n=(0,s.Tj)({}),o=e.body,r=(0,s.s)(o,{error:s.lK,error_description:s.lK});Object.assign(n,r);const i=new N({$metadata:a(e),...n});return(0,s.Mw)(i,e.body)},a=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Rt=(e,t)=>collectBody(e,t).then(n=>t.utf8Encoder(n)),pt="aws_iam";class ht extends s.uB.classBuilder().ep(be).m(function(t,n,o,r){return[(0,Be.TM)(o,this.serialize,this.deserialize),(0,L.rD)(o,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Le,Je).ser(We).de(Ze).build(){}}};
