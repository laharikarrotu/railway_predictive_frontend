"use strict";var wn=Object.defineProperty;var Dn=(j,D,a)=>D in j?wn(j,D,{enumerable:!0,configurable:!0,writable:!0,value:a}):j[D]=a;var g=(j,D,a)=>(Dn(j,typeof D!="symbol"?D+"":D,a),a);exports.id=451,exports.ids=[451],exports.modules={5451:(j,D,a)=>{a.d(D,{getDefaultRoleAssumer:()=>Zs,getDefaultRoleAssumerWithWebIdentity:()=>Qs});var de=a(87948),me=a(48373),os=a(39248),i=a(43040);const qs=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),rs={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class b extends i.TJ{constructor(t){super(t),Object.setPrototypeOf(this,b.prototype)}}class ue extends b{constructor(s){super({name:"ExpiredTokenException",$fault:"client",...s});g(this,"name","ExpiredTokenException");g(this,"$fault","client");Object.setPrototypeOf(this,ue.prototype)}}class fe extends b{constructor(s){super({name:"MalformedPolicyDocumentException",$fault:"client",...s});g(this,"name","MalformedPolicyDocumentException");g(this,"$fault","client");Object.setPrototypeOf(this,fe.prototype)}}class he extends b{constructor(s){super({name:"PackedPolicyTooLargeException",$fault:"client",...s});g(this,"name","PackedPolicyTooLargeException");g(this,"$fault","client");Object.setPrototypeOf(this,he.prototype)}}class ye extends b{constructor(s){super({name:"RegionDisabledException",$fault:"client",...s});g(this,"name","RegionDisabledException");g(this,"$fault","client");Object.setPrototypeOf(this,ye.prototype)}}class ge extends b{constructor(s){super({name:"IDPRejectedClaimException",$fault:"client",...s});g(this,"name","IDPRejectedClaimException");g(this,"$fault","client");Object.setPrototypeOf(this,ge.prototype)}}class Ae extends b{constructor(s){super({name:"InvalidIdentityTokenException",$fault:"client",...s});g(this,"name","InvalidIdentityTokenException");g(this,"$fault","client");Object.setPrototypeOf(this,Ae.prototype)}}class Se extends b{constructor(s){super({name:"IDPCommunicationErrorException",$fault:"client",...s});g(this,"name","IDPCommunicationErrorException");g(this,"$fault","client");Object.setPrototypeOf(this,Se.prototype)}}class Re extends b{constructor(s){super({name:"InvalidAuthorizationMessageException",$fault:"client",...s});g(this,"name","InvalidAuthorizationMessageException");g(this,"$fault","client");Object.setPrototypeOf(this,Re.prototype)}}const N=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:i.$H}}),Js=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),$n=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:SENSITIVE_STRING}}),Wn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Ys=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:i.$H}}),Xs=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Mn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),kn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Kn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}});var Ee=a(96581),Ie=a(54847);const et=async(e,t)=>{const s=M;let n;return n=U({...ut(e,t),[K]:jt,[G]:k}),W(t,s,"/",void 0,n)},zn=async(e,t)=>{const s=M;let n;return n=U({...ft(e,t),[K]:Nt,[G]:k}),W(t,s,"/",void 0,n)},st=async(e,t)=>{const s=M;let n;return n=U({...ht(e,t),[K]:Bt,[G]:k}),W(t,s,"/",void 0,n)},Fn=async(e,t)=>{const s=M;let n;return n=U({...yt(e,t),[K]:Vt,[G]:k}),W(t,s,"/",void 0,n)},Ln=async(e,t)=>{const s=M;let n;return n=U({...gt(e,t),[K]:Zt,[G]:k}),W(t,s,"/",void 0,n)},Gn=async(e,t)=>{const s=M;let n;return n=U({...At(e,t),[K]:Qt,[G]:k}),W(t,s,"/",void 0,n)},Un=async(e,t)=>{const s=M;let n;return n=U({...St(e,t),[K]:qt,[G]:k}),W(t,s,"/",void 0,n)},On=async(e,t)=>{const s=M;let n;return n=U({...Rt(e,t),[K]:Jt,[G]:k}),W(t,s,"/",void 0,n)},Hn=async(e,t)=>{const s=M;let n;return n=U({...Et(e,t),[K]:Yt,[G]:k}),W(t,s,"/",void 0,n)},tt=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await(0,Ee.t_)(e.body,t);let n={};return n=pt(s.AssumeRoleResult,t),{$metadata:A(e),...n}},jn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=_t(s.AssumeRoleWithSAMLResult,t),{$metadata:A(e),...n}},nt=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await(0,Ee.t_)(e.body,t);let n={};return n=bt(s.AssumeRoleWithWebIdentityResult,t),{$metadata:A(e),...n}},Nn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=xt(s.AssumeRootResult,t),{$metadata:A(e),...n}},Bn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=Tt(s.DecodeAuthorizationMessageResult,t),{$metadata:A(e),...n}},Vn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=$t(s.GetAccessKeyInfoResult,t),{$metadata:A(e),...n}},Zn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=Wt(s.GetCallerIdentityResult,t),{$metadata:A(e),...n}},Qn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=Mt(s.GetFederationTokenResult,t),{$metadata:A(e),...n}},qn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=kt(s.GetSessionTokenResult,t),{$metadata:A(e),...n}},$=async(e,t)=>{const s={...e,body:await(0,Ee.FI)(e.body,t)},n=Xt(e,s.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await ot(s,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await lt(s,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await dt(s,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await mt(s,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await it(s,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await at(s,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await rt(s,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await ct(s,t);default:const o=s.body;return Ht({output:e,parsedBody:o.Error,errorCode:n})}},ot=async(e,t)=>{const s=e.body,n=wt(s.Error,t),o=new ue({$metadata:A(e),...n});return(0,i.Mw)(o,s)},rt=async(e,t)=>{const s=e.body,n=Kt(s.Error,t),o=new Se({$metadata:A(e),...n});return(0,i.Mw)(o,s)},it=async(e,t)=>{const s=e.body,n=zt(s.Error,t),o=new ge({$metadata:A(e),...n});return(0,i.Mw)(o,s)},ct=async(e,t)=>{const s=e.body,n=Ft(s.Error,t),o=new Re({$metadata:A(e),...n});return(0,i.Mw)(o,s)},at=async(e,t)=>{const s=e.body,n=Lt(s.Error,t),o=new Ae({$metadata:A(e),...n});return(0,i.Mw)(o,s)},lt=async(e,t)=>{const s=e.body,n=Gt(s.Error,t),o=new fe({$metadata:A(e),...n});return(0,i.Mw)(o,s)},dt=async(e,t)=>{const s=e.body,n=Ut(s.Error,t),o=new he({$metadata:A(e),...n});return(0,i.Mw)(o,s)},mt=async(e,t)=>{const s=e.body,n=Ot(s.Error,t),o=new ye({$metadata:A(e),...n});return(0,i.Mw)(o,s)},ut=(e,t)=>{const s={};if(e[L]!=null&&(s[L]=e[L]),e[q]!=null&&(s[q]=e[q]),e[p]!=null){const n=ce(e[p],t);e[p]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,l])=>{const r=`PolicyArns.${o}`;s[r]=l})}if(e[v]!=null&&(s[v]=e[v]),e[y]!=null&&(s[y]=e[y]),e[Y]!=null){const n=cs(e[Y],t);e[Y]?.length===0&&(s.Tags=[]),Object.entries(n).forEach(([o,l])=>{const r=`Tags.${o}`;s[r]=l})}if(e[Ve]!=null){const n=vt(e[Ve],t);e[Ve]?.length===0&&(s.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,l])=>{const r=`TransitiveTagKeys.${o}`;s[r]=l})}if(e[be]!=null&&(s[be]=e[be]),e[J]!=null&&(s[J]=e[J]),e[X]!=null&&(s[X]=e[X]),e[I]!=null&&(s[I]=e[I]),e[ze]!=null){const n=Ct(e[ze],t);e[ze]?.length===0&&(s.ProvidedContexts=[]),Object.entries(n).forEach(([o,l])=>{const r=`ProvidedContexts.${o}`;s[r]=l})}return s},ft=(e,t)=>{const s={};if(e[L]!=null&&(s[L]=e[L]),e[ke]!=null&&(s[ke]=e[ke]),e[Oe]!=null&&(s[Oe]=e[Oe]),e[p]!=null){const n=ce(e[p],t);e[p]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,l])=>{const r=`PolicyArns.${o}`;s[r]=l})}return e[v]!=null&&(s[v]=e[v]),e[y]!=null&&(s[y]=e[y]),s},ht=(e,t)=>{const s={};if(e[L]!=null&&(s[L]=e[L]),e[q]!=null&&(s[q]=e[q]),e[qe]!=null&&(s[qe]=e[qe]),e[Fe]!=null&&(s[Fe]=e[Fe]),e[p]!=null){const n=ce(e[p],t);e[p]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,l])=>{const r=`PolicyArns.${o}`;s[r]=l})}return e[v]!=null&&(s[v]=e[v]),e[y]!=null&&(s[y]=e[y]),s},yt=(e,t)=>{const s={};if(e[Be]!=null&&(s[Be]=e[Be]),e[as]!=null){const n=is(e[as],t);Object.entries(n).forEach(([o,l])=>{const r=`TaskPolicyArn.${o}`;s[r]=l})}return e[y]!=null&&(s[y]=e[y]),s},gt=(e,t)=>{const s={};return e[xe]!=null&&(s[xe]=e[xe]),s},At=(e,t)=>{const s={};return e[V]!=null&&(s[V]=e[V]),s},St=(e,t)=>({}),Rt=(e,t)=>{const s={};if(e[We]!=null&&(s[We]=e[We]),e[v]!=null&&(s[v]=e[v]),e[p]!=null){const n=ce(e[p],t);e[p]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,l])=>{const r=`PolicyArns.${o}`;s[r]=l})}if(e[y]!=null&&(s[y]=e[y]),e[Y]!=null){const n=cs(e[Y],t);e[Y]?.length===0&&(s.Tags=[]),Object.entries(n).forEach(([o,l])=>{const r=`Tags.${o}`;s[r]=l})}return s},Et=(e,t)=>{const s={};return e[y]!=null&&(s[y]=e[y]),e[J]!=null&&(s[J]=e[J]),e[X]!=null&&(s[X]=e[X]),s},ce=(e,t)=>{const s={};let n=1;for(const o of e){if(o===null)continue;const l=is(o,t);Object.entries(l).forEach(([r,C])=>{s[`member.${n}.${r}`]=C}),n++}return s},is=(e,t)=>{const s={};return e[Je]!=null&&(s[Je]=e[Je]),s},It=(e,t)=>{const s={};return e[Ke]!=null&&(s[Ke]=e[Ke]),e[ve]!=null&&(s[ve]=e[ve]),s},Ct=(e,t)=>{const s={};let n=1;for(const o of e){if(o===null)continue;const l=It(o,t);Object.entries(l).forEach(([r,C])=>{s[`member.${n}.${r}`]=C}),n++}return s},Pt=(e,t)=>{const s={};return e[$e]!=null&&(s[$e]=e[$e]),e[Qe]!=null&&(s[Qe]=e[Qe]),s},vt=(e,t)=>{const s={};let n=1;for(const o of e)o!==null&&(s[`member.${n}`]=o,n++);return s},cs=(e,t)=>{const s={};let n=1;for(const o of e){if(o===null)continue;const l=Pt(o,t);Object.entries(l).forEach(([r,C])=>{s[`member.${n}.${r}`]=C}),n++}return s},Ce=(e,t)=>{const s={};return e[Pe]!=null&&(s[Pe]=(0,i.lK)(e[Pe])),e[F]!=null&&(s[F]=(0,i.lK)(e[F])),s},pt=(e,t)=>{const s={};return e[h]!=null&&(s[h]=B(e[h],t)),e[z]!=null&&(s[z]=Ce(e[z],t)),e[_]!=null&&(s[_]=(0,i.xW)(e[_])),e[I]!=null&&(s[I]=(0,i.lK)(e[I])),s},_t=(e,t)=>{const s={};return e[h]!=null&&(s[h]=B(e[h],t)),e[z]!=null&&(s[z]=Ce(e[z],t)),e[_]!=null&&(s[_]=__strictParseInt32(e[_])),e[Ge]!=null&&(s[Ge]=__expectString(e[Ge])),e[je]!=null&&(s[je]=__expectString(e[je])),e[De]!=null&&(s[De]=__expectString(e[De])),e[Q]!=null&&(s[Q]=__expectString(e[Q])),e[Me]!=null&&(s[Me]=__expectString(e[Me])),e[I]!=null&&(s[I]=__expectString(e[I])),s},bt=(e,t)=>{const s={};return e[h]!=null&&(s[h]=B(e[h],t)),e[He]!=null&&(s[He]=(0,i.lK)(e[He])),e[z]!=null&&(s[z]=Ce(e[z],t)),e[_]!=null&&(s[_]=(0,i.xW)(e[_])),e[Le]!=null&&(s[Le]=(0,i.lK)(e[Le])),e[Q]!=null&&(s[Q]=(0,i.lK)(e[Q])),e[I]!=null&&(s[I]=(0,i.lK)(e[I])),s},xt=(e,t)=>{const s={};return e[h]!=null&&(s[h]=B(e[h],t)),e[I]!=null&&(s[I]=__expectString(e[I])),s},B=(e,t)=>{const s={};return e[V]!=null&&(s[V]=(0,i.lK)(e[V])),e[Ue]!=null&&(s[Ue]=(0,i.lK)(e[Ue])),e[Ne]!=null&&(s[Ne]=(0,i.lK)(e[Ne])),e[_e]!=null&&(s[_e]=(0,i.Y0)((0,i.t_)(e[_e]))),s},Tt=(e,t)=>{const s={};return e[pe]!=null&&(s[pe]=__expectString(e[pe])),s},wt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Dt=(e,t)=>{const s={};return e[we]!=null&&(s[we]=__expectString(e[we])),e[F]!=null&&(s[F]=__expectString(e[F])),s},$t=(e,t)=>{const s={};return e[Z]!=null&&(s[Z]=__expectString(e[Z])),s},Wt=(e,t)=>{const s={};return e[Ze]!=null&&(s[Ze]=__expectString(e[Ze])),e[Z]!=null&&(s[Z]=__expectString(e[Z])),e[F]!=null&&(s[F]=__expectString(e[F])),s},Mt=(e,t)=>{const s={};return e[h]!=null&&(s[h]=B(e[h],t)),e[Te]!=null&&(s[Te]=Dt(e[Te],t)),e[_]!=null&&(s[_]=__strictParseInt32(e[_])),s},kt=(e,t)=>{const s={};return e[h]!=null&&(s[h]=B(e[h],t)),s},Kt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},zt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ft=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Lt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Gt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ut=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ot=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},A=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Jn=(e,t)=>collectBody(e,t).then(s=>t.utf8Encoder(s)),Ht=(0,i.jr)(b),W=async(e,t,s,n,o)=>{const{hostname:l,protocol:r="https",port:C,path:T}=await e.endpoint(),w={protocol:r,hostname:l,port:C,method:"POST",path:T.endsWith("/")?T.slice(0,-1)+s:T+s,headers:t};return n!==void 0&&(w.hostname=n),o!==void 0&&(w.body=o),new Ie.Kd(w)},M={"content-type":"application/x-www-form-urlencoded"},k="2011-06-15",K="Action",V="AccessKeyId",jt="AssumeRole",Pe="AssumedRoleId",z="AssumedRoleUser",Nt="AssumeRoleWithSAML",Bt="AssumeRoleWithWebIdentity",Vt="AssumeRoot",Z="Account",F="Arn",Q="Audience",h="Credentials",ve="ContextAssertion",Zt="DecodeAuthorizationMessage",pe="DecodedMessage",y="DurationSeconds",_e="Expiration",be="ExternalId",xe="EncodedMessage",Te="FederatedUser",we="FederatedUserId",Qt="GetAccessKeyInfo",qt="GetCallerIdentity",Jt="GetFederationToken",Yt="GetSessionToken",De="Issuer",$e="Key",We="Name",Me="NameQualifier",v="Policy",p="PolicyArns",ke="PrincipalArn",Ke="ProviderArn",ze="ProvidedContexts",Fe="ProviderId",_="PackedPolicySize",Le="Provider",L="RoleArn",q="RoleSessionName",Ge="Subject",Ue="SecretAccessKey",Oe="SAMLAssertion",He="SubjectFromWebIdentityToken",I="SourceIdentity",J="SerialNumber",je="SubjectType",Ne="SessionToken",Y="Tags",X="TokenCode",Be="TargetPrincipal",as="TaskPolicyArn",Ve="TransitiveTagKeys",Ze="UserId",G="Version",Qe="Value",qe="WebIdentityToken",Je="arn",u="message",U=e=>Object.entries(e).map(([t,s])=>(0,i.$6)(t)+"="+(0,i.$6)(s)).join("&"),Xt=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};class en extends i.uB.classBuilder().ep(rs).m(function(t,s,n,o){return[(0,os.TM)(n,this.serialize,this.deserialize),(0,me.rD)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Js).ser(et).de(tt).build(){}class sn extends i.uB.classBuilder().ep(rs).m(function(t,s,n,o){return[(0,os.TM)(n,this.serialize,this.deserialize),(0,me.rD)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Ys,Xs).ser(st).de(nt).build(){}const ls="us-east-1",ds=e=>{if(typeof e?.Arn=="string"){const t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},ms=async(e,t,s)=>{const n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t;return s?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${ls} (STS default)`),n??o??ls},us=(e,t)=>{let s,n;return async(o,l)=>{if(n=o,!s){const{logger:te=e?.parentClientConfig?.logger,region:ne,requestHandler:oe=e?.parentClientConfig?.requestHandler,credentialProviderLogger:ns}=e,xn=await ms(ne,e?.parentClientConfig?.region,ns),Tn=!hs(oe);s=new t({credentialDefaultProvider:()=>async()=>n,region:xn,requestHandler:Tn?oe:void 0,logger:te})}const{Credentials:r,AssumedRoleUser:C}=await s.send(new en(l));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${l.RoleArn}`);const T=ds(C),w={accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration,...r.CredentialScope&&{credentialScope:r.CredentialScope},...T&&{accountId:T}};return(0,de.g)(w,"CREDENTIALS_STS_ASSUME_ROLE","i"),w}},fs=(e,t)=>{let s;return async n=>{if(!s){const{logger:T=e?.parentClientConfig?.logger,region:w,requestHandler:te=e?.parentClientConfig?.requestHandler,credentialProviderLogger:ne}=e,oe=await ms(w,e?.parentClientConfig?.region,ne),ns=!hs(te);s=new t({region:oe,requestHandler:ns?te:void 0,logger:T})}const{Credentials:o,AssumedRoleUser:l}=await s.send(new sn(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);const r=ds(l),C={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...r&&{accountId:r}};return r&&(0,de.g)(C,"RESOLVED_ACCOUNT_ID","T"),(0,de.g)(C,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),C}},Yn=e=>t=>e({roleAssumer:us(t,t.stsClientCtor),roleAssumerWithWebIdentity:fs(t,t.stsClientCtor),...t}),hs=e=>e?.metadata?.handlerProtocol==="h2";var ys=a(51647),tn=a(18375),nn=a(1473),gs=a(12569),re=a(93575),ie=a(59859),on=a(24961),ae=a(34674),rn=a(70944),As=a(83207);const cn=async(e,t,s)=>({operation:(0,As.u)(t).operation,region:await(0,As.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function an(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function Ss(e){return{schemeId:"smithy.api#noAuth"}}const ln=e=>{const t=[];switch(e.operation){case"AssumeRoleWithSAML":{t.push(Ss(e));break}case"AssumeRoleWithWebIdentity":{t.push(Ss(e));break}default:t.push(an(e))}return t},dn=e=>({...e,stsClientCtor:ts}),mn=e=>{const t=dn(e);return{...(0,rn.h)(t)}},un={rE:"3.726.0"};var fn=a(61610),Rs=a(25820),Es=a(51273),Is=a(16239),hn=a(3101),ee=a(19067),Cs=a(88135),yn=a(89641),gn=a(5075),An=a(69913),Ps=a(83876),vs=a(30389),Sn=a(9012),Ye=a(64409);const ps="required",c="type",d="fn",m="argv",O="ref",_s=!1,Xe=!0,H="booleanEquals",S="stringEquals",bs="sigv4",xs="sts",Ts="us-east-1",f="endpoint",ws="https://sts.{Region}.{PartitionResult#dnsSuffix}",x="tree",se="error",es="getAttr",Ds={[ps]:!1,[c]:"String"},ss={[ps]:!0,default:!1,[c]:"Boolean"},$s={[O]:"Endpoint"},Ws={[d]:"isSet",[m]:[{[O]:"Region"}]},R={[O]:"Region"},Ms={[d]:"aws.partition",[m]:[R],assign:"PartitionResult"},ks={[O]:"UseFIPS"},Ks={[O]:"UseDualStack"},E={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:bs,signingName:xs,signingRegion:Ts}]},headers:{}},P={},zs={conditions:[{[d]:S,[m]:[R,"aws-global"]}],[f]:E,[c]:f},Fs={[d]:H,[m]:[ks,!0]},Ls={[d]:H,[m]:[Ks,!0]},Gs={[d]:es,[m]:[{[O]:"PartitionResult"},"supportsFIPS"]},Us={[O]:"PartitionResult"},Os={[d]:H,[m]:[!0,{[d]:es,[m]:[Us,"supportsDualStack"]}]},Hs=[{[d]:"isSet",[m]:[$s]}],js=[Fs],Ns=[Ls],Rn={version:"1.0",parameters:{Region:Ds,UseDualStack:ss,UseFIPS:ss,Endpoint:Ds,UseGlobalEndpoint:ss},rules:[{conditions:[{[d]:H,[m]:[{[O]:"UseGlobalEndpoint"},Xe]},{[d]:"not",[m]:Hs},Ws,Ms,{[d]:H,[m]:[ks,_s]},{[d]:H,[m]:[Ks,_s]}],rules:[{conditions:[{[d]:S,[m]:[R,"ap-northeast-1"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"ap-south-1"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"ap-southeast-1"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"ap-southeast-2"]}],endpoint:E,[c]:f},zs,{conditions:[{[d]:S,[m]:[R,"ca-central-1"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"eu-central-1"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"eu-north-1"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"eu-west-1"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"eu-west-2"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"eu-west-3"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"sa-east-1"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,Ts]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"us-east-2"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"us-west-1"]}],endpoint:E,[c]:f},{conditions:[{[d]:S,[m]:[R,"us-west-2"]}],endpoint:E,[c]:f},{endpoint:{url:ws,properties:{authSchemes:[{name:bs,signingName:xs,signingRegion:"{Region}"}]},headers:P},[c]:f}],[c]:x},{conditions:Hs,rules:[{conditions:js,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[c]:se},{conditions:Ns,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[c]:se},{endpoint:{url:$s,properties:P,headers:P},[c]:f}],[c]:x},{conditions:[Ws],rules:[{conditions:[Ms],rules:[{conditions:[Fs,Ls],rules:[{conditions:[{[d]:H,[m]:[Xe,Gs]},Os],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:P,headers:P},[c]:f}],[c]:x},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[c]:se}],[c]:x},{conditions:js,rules:[{conditions:[{[d]:H,[m]:[Gs,Xe]}],rules:[{conditions:[{[d]:S,[m]:[{[d]:es,[m]:[Us,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:P,headers:P},[c]:f},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:P,headers:P},[c]:f}],[c]:x},{error:"FIPS is enabled but this partition does not support FIPS",[c]:se}],[c]:x},{conditions:Ns,rules:[{conditions:[Os],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:P,headers:P},[c]:f}],[c]:x},{error:"DualStack is enabled but this partition does not support DualStack",[c]:se}],[c]:x},zs,{endpoint:{url:ws,properties:P,headers:P},[c]:f}],[c]:x}],[c]:x},{error:"Invalid Configuration: Missing Region",[c]:se}]},En=new Ye.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),In=(e,t={})=>En.get(e,()=>(0,Ye.sO)(Rn,{endpointParams:e,logger:t.logger}));Ye.mw.aws=Sn.UF;const Cn=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Ps.E,base64Encoder:e?.base64Encoder??Ps.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??In,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??ln,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Rs.f2},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ie.mR}],logger:e?.logger??new i.N4,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??An.D,utf8Decoder:e?.utf8Decoder??vs.ar,utf8Encoder:e?.utf8Encoder??vs.Pq});var Pn=a(58633);const vn=e=>{(0,i.I9)(process.version);const t=(0,Pn.I)(e),s=()=>t().then(i.lT),n=Cn(e);(0,fn.I)(process.version);const o={profile:e?.profile};return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??yn.n,credentialDefaultProvider:e?.credentialDefaultProvider??Es.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Is.pf)({serviceId:n.serviceId,clientVersion:un.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:l=>l.getIdentityProvider("aws.auth#sigv4")||(async r=>await(0,Es.v6)(r?.__config||{})()),signer:new Rs.f2},{schemeId:"smithy.api#noAuth",identityProvider:l=>l.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ie.mR}],maxAttempts:e?.maxAttempts??(0,ee.Z)(ae.qs,e),region:e?.region??(0,ee.Z)(re.GG,{...re.zH,...o}),requestHandler:Cs.$c.create(e?.requestHandler??s),retryMode:e?.retryMode??(0,ee.Z)({...ae.kN,default:async()=>(await s()).retryMode||gn.L0},e),sha256:e?.sha256??hn.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Cs.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ee.Z)(re.e$,o),useFipsEndpoint:e?.useFipsEndpoint??(0,ee.Z)(re.Ko,o),userAgentAppId:e?.userAgentAppId??(0,ee.Z)(Is.hV,o)}};var Bs=a(75768);const pn=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const l=t.findIndex(r=>r.schemeId===o.schemeId);l===-1?t.push(o):t.splice(l,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){s=o},httpAuthSchemeProvider(){return s},setCredentials(o){n=o},credentials(){return n}}},_n=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),le=e=>e,bn=(e,t)=>{const s={...le((0,Bs.Rq)(e)),...le((0,i.xA)(e)),...le((0,Ie.eS)(e)),...le(pn(e))};return t.forEach(n=>n.configure(s)),{...e,...(0,Bs.$3)(s),...(0,i.uv)(s),...(0,Ie.jt)(s),..._n(s)}};class ts extends i.Kj{constructor(...[s]){const n=vn(s||{}),o=qs(n),l=(0,gs.Dc)(o),r=(0,ae.$z)(l),C=(0,re.TD)(r),T=(0,ys.OV)(C),w=(0,me.Co)(T),te=mn(w),ne=bn(te,s?.extensions||[]);super(ne);g(this,"config");this.config=ne,this.middlewareStack.use((0,gs.sM)(this.config)),this.middlewareStack.use((0,ae.ey)(this.config)),this.middlewareStack.use((0,on.vK)(this.config)),this.middlewareStack.use((0,ys.TC)(this.config)),this.middlewareStack.use((0,tn.Y7)(this.config)),this.middlewareStack.use((0,nn.n4)(this.config)),this.middlewareStack.use((0,ie.wB)(this.config,{httpAuthSchemeParametersProvider:cn,identityProviderConfigProvider:async oe=>new ie.h$({"aws.auth#sigv4":oe.credentials})})),this.middlewareStack.use((0,ie.lW)(this.config))}destroy(){super.destroy()}}const Vs=(e,t)=>t?class extends e{constructor(n){super(n);for(const o of t)this.middlewareStack.use(o)}}:e,Zs=(e={},t)=>us(e,Vs(ts,t)),Qs=(e={},t)=>fs(e,Vs(ts,t)),eo=e=>t=>e({roleAssumer:Zs(t),roleAssumerWithWebIdentity:Qs(t),...t})}};
