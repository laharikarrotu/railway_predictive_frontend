"use strict";var ft=Object.defineProperty;var Et=(S,m,a)=>m in S?ft(S,m,{enumerable:!0,configurable:!0,writable:!0,value:a}):S[m]=a;var s=(S,m,a)=>(Et(S,typeof m!="symbol"?m+"":m,a),a);exports.id=32,exports.ids=[32],exports.modules={44032:(S,m,a)=>{a.d(m,{CreateTokenCommand:()=>mt,SSOOIDCClient:()=>Le});var J=a(9061),ve=a(91429),ge=a(15927),W=a(55703),E=a(27437),I=a(17457),fe=a(76463),Z=a(81099),_=a(52948),n=a(21518),Ee=a(15234),Y=a(15249);const Ie=async(e,r,t)=>({operation:(0,Y.u)(r).operation,region:await(0,Y.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Te(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(r,t)=>({signingProperties:{config:r,context:t}})}}function P(e){return{schemeId:"smithy.api#noAuth"}}const we=e=>{const r=[];switch(e.operation){case"CreateToken":{r.push(P(e));break}case"RegisterClient":{r.push(P(e));break}case"StartDeviceAuthorization":{r.push(P(e));break}default:r.push(Te(e))}return r},_e=e=>({...(0,Ee.h)(e)}),be=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),Ce={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Pe={rE:"3.726.0"};var Re=a(82304),ke=a(7559),X=a(97661),Ae=a(61695),x=a(81949),Q=a(12001),$e=a(44051),je=a(22309),Oe=a(36538),De=a(19795),q=a(20158),ee=a(25643),ze=a(79094),R=a(14399);const te="required",p="fn",h="argv",v="ref",ne=!0,re="isSet",T="booleanEquals",g="error",f="endpoint",y="tree",k="PartitionResult",A="getAttr",oe={[te]:!1,type:"String"},se={[te]:!0,default:!1,type:"Boolean"},ie={[v]:"Endpoint"},ce={[p]:T,[h]:[{[v]:"UseFIPS"},!0]},ae={[p]:T,[h]:[{[v]:"UseDualStack"},!0]},u={},de={[p]:A,[h]:[{[v]:k},"supportsFIPS"]},le={[v]:k},pe={[p]:T,[h]:[!0,{[p]:A,[h]:[le,"supportsDualStack"]}]},he=[ce],ue=[ae],me=[{[v]:"Region"}],Ke={version:"1.0",parameters:{Region:oe,UseDualStack:se,UseFIPS:se,Endpoint:oe},rules:[{conditions:[{[p]:re,[h]:[ie]}],rules:[{conditions:he,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:g},{conditions:ue,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:g},{endpoint:{url:ie,properties:u,headers:u},type:f}],type:y},{conditions:[{[p]:re,[h]:me}],rules:[{conditions:[{[p]:"aws.partition",[h]:me,assign:k}],rules:[{conditions:[ce,ae],rules:[{conditions:[{[p]:T,[h]:[ne,de]},pe],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:u,headers:u},type:f}],type:y},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:g}],type:y},{conditions:he,rules:[{conditions:[{[p]:T,[h]:[de,ne]}],rules:[{conditions:[{[p]:"stringEquals",[h]:[{[p]:A,[h]:[le,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:u,headers:u},type:f},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:u,headers:u},type:f}],type:y},{error:"FIPS is enabled but this partition does not support FIPS",type:g}],type:y},{conditions:ue,rules:[{conditions:[pe],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:u,headers:u},type:f}],type:y},{error:"DualStack is enabled but this partition does not support DualStack",type:g}],type:y},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:u,headers:u},type:f}],type:y}],type:y},{error:"Invalid Configuration: Missing Region",type:g}]},Ue=new R.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ne=(e,r={})=>Ue.get(e,()=>(0,R.sO)(Ke,{endpointParams:e,logger:r.logger}));R.mw.aws=ze.UF;const Me=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??q.E,base64Encoder:e?.base64Encoder??q.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ne,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??we,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:r=>r.getIdentityProvider("aws.auth#sigv4"),signer:new Oe.f2},{schemeId:"smithy.api#noAuth",identityProvider:r=>r.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new I.mR}],logger:e?.logger??new n.N4,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??De.D,utf8Decoder:e?.utf8Decoder??ee.ar,utf8Encoder:e?.utf8Encoder??ee.Pq});var Ve=a(19919);const Ge=e=>{(0,n.I9)(process.version);const r=(0,Ve.I)(e),t=()=>r().then(n.lT),i=Me(e);(0,Re.I)(process.version);const o={profile:e?.profile};return{...i,...e,runtime:"node",defaultsMode:r,bodyLengthChecker:e?.bodyLengthChecker??$e.n,credentialDefaultProvider:e?.credentialDefaultProvider??ke.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,X.pf)({serviceId:i.serviceId,clientVersion:Pe.rE}),maxAttempts:e?.maxAttempts??(0,x.Z)(_.qs,e),region:e?.region??(0,x.Z)(E.GG,{...E.zH,...o}),requestHandler:Q.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,x.Z)({..._.kN,default:async()=>(await t()).retryMode||je.L0},e),sha256:e?.sha256??Ae.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Q.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,x.Z)(E.e$,o),useFipsEndpoint:e?.useFipsEndpoint??(0,x.Z)(E.Ko,o),userAgentAppId:e?.userAgentAppId??(0,x.Z)(X.hV,o)}};var ye=a(85278),Se=a(19245);const Fe=e=>{const r=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,i=e.credentials;return{setHttpAuthScheme(o){const c=r.findIndex(w=>w.schemeId===o.schemeId);c===-1?r.push(o):r.splice(c,1,o)},httpAuthSchemes(){return r},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){i=o},credentials(){return i}}},He=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),b=e=>e,Be=(e,r)=>{const t={...b((0,ye.Rq)(e)),...b((0,n.xA)(e)),...b((0,Se.eS)(e)),...b(Fe(e))};return r.forEach(i=>i.configure(t)),{...e,...(0,ye.$3)(t),...(0,n.uv)(t),...(0,Se.jt)(t),...He(t)}};class Le extends n.Kj{constructor(...[t]){const i=Ge(t||{}),o=be(i),c=(0,W.Dc)(o),w=(0,_.$z)(c),yt=(0,E.TD)(w),St=(0,J.OV)(yt),xt=(0,Z.Co)(St),vt=_e(xt),xe=Be(vt,t?.extensions||[]);super(xe);s(this,"config");this.config=xe,this.middlewareStack.use((0,W.sM)(this.config)),this.middlewareStack.use((0,_.ey)(this.config)),this.middlewareStack.use((0,fe.vK)(this.config)),this.middlewareStack.use((0,J.TC)(this.config)),this.middlewareStack.use((0,ve.Y7)(this.config)),this.middlewareStack.use((0,ge.n4)(this.config)),this.middlewareStack.use((0,I.wB)(this.config,{httpAuthSchemeParametersProvider:Ie,identityProviderConfigProvider:async gt=>new I.h$({"aws.auth#sigv4":gt.credentials})})),this.middlewareStack.use((0,I.lW)(this.config))}destroy(){super.destroy()}}var Je=a(47882);class l extends n.TJ{constructor(r){super(r),Object.setPrototypeOf(this,l.prototype)}}class $ extends l{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t});s(this,"name","AccessDeniedException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,$.prototype),this.error=t.error,this.error_description=t.error_description}}class j extends l{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t});s(this,"name","AuthorizationPendingException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,j.prototype),this.error=t.error,this.error_description=t.error_description}}class O extends l{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});s(this,"name","ExpiredTokenException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,O.prototype),this.error=t.error,this.error_description=t.error_description}}class D extends l{constructor(t){super({name:"InternalServerException",$fault:"server",...t});s(this,"name","InternalServerException");s(this,"$fault","server");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,D.prototype),this.error=t.error,this.error_description=t.error_description}}class z extends l{constructor(t){super({name:"InvalidClientException",$fault:"client",...t});s(this,"name","InvalidClientException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,z.prototype),this.error=t.error,this.error_description=t.error_description}}class K extends l{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t});s(this,"name","InvalidGrantException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,K.prototype),this.error=t.error,this.error_description=t.error_description}}class U extends l{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t});s(this,"name","InvalidRequestException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,U.prototype),this.error=t.error,this.error_description=t.error_description}}class N extends l{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t});s(this,"name","InvalidScopeException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,N.prototype),this.error=t.error,this.error_description=t.error_description}}class M extends l{constructor(t){super({name:"SlowDownException",$fault:"client",...t});s(this,"name","SlowDownException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,M.prototype),this.error=t.error,this.error_description=t.error_description}}class V extends l{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t});s(this,"name","UnauthorizedClientException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,V.prototype),this.error=t.error,this.error_description=t.error_description}}class G extends l{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t});s(this,"name","UnsupportedGrantTypeException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,G.prototype),this.error=t.error,this.error_description=t.error_description}}class F extends l{constructor(t){super({name:"InvalidRequestRegionException",$fault:"client",...t});s(this,"name","InvalidRequestRegionException");s(this,"$fault","client");s(this,"error");s(this,"error_description");s(this,"endpoint");s(this,"region");Object.setPrototypeOf(this,F.prototype),this.error=t.error,this.error_description=t.error_description,this.endpoint=t.endpoint,this.region=t.region}}class H extends l{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t});s(this,"name","InvalidClientMetadataException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,H.prototype),this.error=t.error,this.error_description=t.error_description}}class B extends l{constructor(t){super({name:"InvalidRedirectUriException",$fault:"client",...t});s(this,"name","InvalidRedirectUriException");s(this,"$fault","client");s(this,"error");s(this,"error_description");Object.setPrototypeOf(this,B.prototype),this.error=t.error,this.error_description=t.error_description}}const We=e=>({...e,...e.clientSecret&&{clientSecret:n.$H},...e.refreshToken&&{refreshToken:n.$H},...e.codeVerifier&&{codeVerifier:n.$H}}),Ze=e=>({...e,...e.accessToken&&{accessToken:n.$H},...e.refreshToken&&{refreshToken:n.$H},...e.idToken&&{idToken:n.$H}}),Tt=e=>({...e,...e.refreshToken&&{refreshToken:SENSITIVE_STRING},...e.assertion&&{assertion:SENSITIVE_STRING},...e.subjectToken&&{subjectToken:SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:SENSITIVE_STRING}}),wt=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING},...e.refreshToken&&{refreshToken:SENSITIVE_STRING},...e.idToken&&{idToken:SENSITIVE_STRING}}),_t=e=>({...e,...e.clientSecret&&{clientSecret:SENSITIVE_STRING}}),bt=e=>({...e,...e.clientSecret&&{clientSecret:SENSITIVE_STRING}});var L=a(58693);const Ye=async(e,r)=>{const t=(0,I.lI)(e,r),i={"content-type":"application/json"};t.bp("/token");let o;return o=JSON.stringify((0,n.s)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:c=>(0,n.Ss)(c)})),t.m("POST").h(i).b(o),t.build()},Ct=async(e,r)=>{const t=rb(e,r),i={"content-type":"application/json"};t.bp("/token");const o=map({[ut]:[,"t"]});let c;return c=JSON.stringify(take(e,{assertion:[],clientId:[],code:[],codeVerifier:[],grantType:[],redirectUri:[],refreshToken:[],requestedTokenType:[],scope:w=>_json(w),subjectToken:[],subjectTokenType:[]})),t.m("POST").h(i).q(o).b(c),t.build()},Pt=async(e,r)=>{const t=rb(e,r),i={"content-type":"application/json"};t.bp("/client/register");let o;return o=JSON.stringify(take(e,{clientName:[],clientType:[],entitledApplicationArn:[],grantTypes:c=>_json(c),issuerUrl:[],redirectUris:c=>_json(c),scopes:c=>_json(c)})),t.m("POST").h(i).b(o),t.build()},Rt=async(e,r)=>{const t=rb(e,r),i={"content-type":"application/json"};t.bp("/device_authorization");let o;return o=JSON.stringify(take(e,{clientId:[],clientSecret:[],startUrl:[]})),t.m("POST").h(i).b(o),t.build()},Xe=async(e,r)=>{if(e.statusCode!==200&&e.statusCode>=300)return C(e,r);const t=(0,n.Tj)({$metadata:d(e)}),i=(0,n.Y0)((0,n.Xk)(await(0,L.Y2)(e.body,r)),"body"),o=(0,n.s)(i,{accessToken:n.lK,expiresIn:n.ET,idToken:n.lK,refreshToken:n.lK,tokenType:n.lK});return Object.assign(t,o),t},kt=async(e,r)=>{if(e.statusCode!==200&&e.statusCode>=300)return C(e,r);const t=map({$metadata:d(e)}),i=__expectNonNull(__expectObject(await parseBody(e.body,r)),"body"),o=take(i,{accessToken:__expectString,expiresIn:__expectInt32,idToken:__expectString,issuedTokenType:__expectString,refreshToken:__expectString,scope:_json,tokenType:__expectString});return Object.assign(t,o),t},At=async(e,r)=>{if(e.statusCode!==200&&e.statusCode>=300)return C(e,r);const t=map({$metadata:d(e)}),i=__expectNonNull(__expectObject(await parseBody(e.body,r)),"body"),o=take(i,{authorizationEndpoint:__expectString,clientId:__expectString,clientIdIssuedAt:__expectLong,clientSecret:__expectString,clientSecretExpiresAt:__expectLong,tokenEndpoint:__expectString});return Object.assign(t,o),t},$t=async(e,r)=>{if(e.statusCode!==200&&e.statusCode>=300)return C(e,r);const t=map({$metadata:d(e)}),i=__expectNonNull(__expectObject(await parseBody(e.body,r)),"body"),o=take(i,{deviceCode:__expectString,expiresIn:__expectInt32,interval:__expectInt32,userCode:__expectString,verificationUri:__expectString,verificationUriComplete:__expectString});return Object.assign(t,o),t},C=async(e,r)=>{const t={...e,body:await(0,L.CG)(e.body,r)},i=(0,L.cJ)(e,t.body);switch(i){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await qe(t,r);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await et(t,r);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await tt(t,r);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await nt(t,r);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await rt(t,r);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await st(t,r);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await ct(t,r);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await dt(t,r);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await lt(t,r);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await pt(t,r);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await ht(t,r);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await at(t,r);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await ot(t,r);case"InvalidRedirectUriException":case"com.amazonaws.ssooidc#InvalidRedirectUriException":throw await it(t,r);default:const o=t.body;return Qe({output:e,parsedBody:o,errorCode:i})}},Qe=(0,n.jr)(l),qe=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new $({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},et=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new j({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},tt=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new O({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},nt=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new D({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},rt=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new z({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},ot=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new H({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},st=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new K({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},it=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new B({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},ct=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new U({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},at=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{endpoint:n.lK,error:n.lK,error_description:n.lK,region:n.lK});Object.assign(t,o);const c=new F({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},dt=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new N({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},lt=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new M({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},pt=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new V({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},ht=async(e,r)=>{const t=(0,n.Tj)({}),i=e.body,o=(0,n.s)(i,{error:n.lK,error_description:n.lK});Object.assign(t,o);const c=new G({$metadata:d(e),...t});return(0,n.Mw)(c,e.body)},d=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),jt=(e,r)=>collectBody(e,r).then(t=>r.utf8Encoder(t)),ut="aws_iam";class mt extends n.uB.classBuilder().ep(Ce).m(function(r,t,i,o){return[(0,Je.TM)(i,this.serialize,this.deserialize),(0,Z.rD)(i,r.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(We,Ze).ser(Ye).de(Xe).build(){}}};
