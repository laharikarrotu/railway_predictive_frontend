"use strict";var Wn=Object.defineProperty;var Mn=(j,D,d)=>D in j?Wn(j,D,{enumerable:!0,configurable:!0,writable:!0,value:d}):j[D]=d;var A=(j,D,d)=>(Mn(j,typeof D!="symbol"?D+"":D,d),d);exports.id=917,exports.ids=[917],exports.modules={30298:(j,D,d)=>{d.d(D,{getDefaultRoleAssumer:()=>Zs,getDefaultRoleAssumerWithWebIdentity:()=>Xs});var le=d(44202),me=d(81099),os=d(47882),i=d(21518);const Qs=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),rs={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class T extends i.TJ{constructor(t){super(t),Object.setPrototypeOf(this,T.prototype)}}class ue extends T{constructor(s){super({name:"ExpiredTokenException",$fault:"client",...s});A(this,"name","ExpiredTokenException");A(this,"$fault","client");Object.setPrototypeOf(this,ue.prototype)}}class fe extends T{constructor(s){super({name:"MalformedPolicyDocumentException",$fault:"client",...s});A(this,"name","MalformedPolicyDocumentException");A(this,"$fault","client");Object.setPrototypeOf(this,fe.prototype)}}class he extends T{constructor(s){super({name:"PackedPolicyTooLargeException",$fault:"client",...s});A(this,"name","PackedPolicyTooLargeException");A(this,"$fault","client");Object.setPrototypeOf(this,he.prototype)}}class ye extends T{constructor(s){super({name:"RegionDisabledException",$fault:"client",...s});A(this,"name","RegionDisabledException");A(this,"$fault","client");Object.setPrototypeOf(this,ye.prototype)}}class ge extends T{constructor(s){super({name:"IDPRejectedClaimException",$fault:"client",...s});A(this,"name","IDPRejectedClaimException");A(this,"$fault","client");Object.setPrototypeOf(this,ge.prototype)}}class Ae extends T{constructor(s){super({name:"InvalidIdentityTokenException",$fault:"client",...s});A(this,"name","InvalidIdentityTokenException");A(this,"$fault","client");Object.setPrototypeOf(this,Ae.prototype)}}class Se extends T{constructor(s){super({name:"IDPCommunicationErrorException",$fault:"client",...s});A(this,"name","IDPCommunicationErrorException");A(this,"$fault","client");Object.setPrototypeOf(this,Se.prototype)}}class Ee extends T{constructor(s){super({name:"InvalidAuthorizationMessageException",$fault:"client",...s});A(this,"name","InvalidAuthorizationMessageException");A(this,"$fault","client");Object.setPrototypeOf(this,Ee.prototype)}}const N=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:i.$H}}),Js=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),kn=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:SENSITIVE_STRING}}),Kn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Ys=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:i.$H}}),qs=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),zn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Fn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Ln=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}});var et=d(12763),st=d(4244);const Re=(e,t)=>(0,st.w)(e,t).then(s=>{if(s.length){const n=new et.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(I,v)=>v.trim()===""&&v.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(s,!0)}catch(I){throw I&&typeof I=="object"&&Object.defineProperty(I,"$responseBodyText",{value:s}),I}const c="#text",r=Object.keys(o)[0],h=o[r];return h[c]&&(h[r]=h[c],delete h[c]),(0,i.rm)(h)}return{}}),tt=async(e,t)=>{const s=await Re(e,t);return s.Error&&(s.Error.message=s.Error.message??s.Error.Message),s},Gn=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};var Ce=d(19245);const nt=async(e,t)=>{const s=M;let n;return n=O({...yt(e,t),[K]:Vt,[G]:k}),W(t,s,"/",void 0,n)},On=async(e,t)=>{const s=M;let n;return n=O({...gt(e,t),[K]:Zt,[G]:k}),W(t,s,"/",void 0,n)},ot=async(e,t)=>{const s=M;let n;return n=O({...At(e,t),[K]:Xt,[G]:k}),W(t,s,"/",void 0,n)},Un=async(e,t)=>{const s=M;let n;return n=O({...St(e,t),[K]:Qt,[G]:k}),W(t,s,"/",void 0,n)},Hn=async(e,t)=>{const s=M;let n;return n=O({...Et(e,t),[K]:Jt,[G]:k}),W(t,s,"/",void 0,n)},jn=async(e,t)=>{const s=M;let n;return n=O({...Rt(e,t),[K]:Yt,[G]:k}),W(t,s,"/",void 0,n)},Nn=async(e,t)=>{const s=M;let n;return n=O({...Ct(e,t),[K]:qt,[G]:k}),W(t,s,"/",void 0,n)},Bn=async(e,t)=>{const s=M;let n;return n=O({...It(e,t),[K]:en,[G]:k}),W(t,s,"/",void 0,n)},Vn=async(e,t)=>{const s=M;let n;return n=O({...pt(e,t),[K]:sn,[G]:k}),W(t,s,"/",void 0,n)},rt=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await Re(e.body,t);let n={};return n=xt(s.AssumeRoleResult,t),{$metadata:S(e),...n}},Zn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=Tt(s.AssumeRoleWithSAMLResult,t),{$metadata:S(e),...n}},it=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await Re(e.body,t);let n={};return n=wt(s.AssumeRoleWithWebIdentityResult,t),{$metadata:S(e),...n}},Xn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=Dt(s.AssumeRootResult,t),{$metadata:S(e),...n}},Qn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=$t(s.DecodeAuthorizationMessageResult,t),{$metadata:S(e),...n}},Jn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=kt(s.GetAccessKeyInfoResult,t),{$metadata:S(e),...n}},Yn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=Kt(s.GetCallerIdentityResult,t),{$metadata:S(e),...n}},qn=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=zt(s.GetFederationTokenResult,t),{$metadata:S(e),...n}},eo=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const s=await parseBody(e.body,t);let n={};return n=Ft(s.GetSessionTokenResult,t),{$metadata:S(e),...n}},$=async(e,t)=>{const s={...e,body:await tt(e.body,t)},n=tn(e,s.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await ct(s,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await ut(s,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await ft(s,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ht(s,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await dt(s,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await mt(s,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await at(s,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await lt(s,t);default:const o=s.body;return Bt({output:e,parsedBody:o.Error,errorCode:n})}},ct=async(e,t)=>{const s=e.body,n=Wt(s.Error,t),o=new ue({$metadata:S(e),...n});return(0,i.Mw)(o,s)},at=async(e,t)=>{const s=e.body,n=Lt(s.Error,t),o=new Se({$metadata:S(e),...n});return(0,i.Mw)(o,s)},dt=async(e,t)=>{const s=e.body,n=Gt(s.Error,t),o=new ge({$metadata:S(e),...n});return(0,i.Mw)(o,s)},lt=async(e,t)=>{const s=e.body,n=Ot(s.Error,t),o=new Ee({$metadata:S(e),...n});return(0,i.Mw)(o,s)},mt=async(e,t)=>{const s=e.body,n=Ut(s.Error,t),o=new Ae({$metadata:S(e),...n});return(0,i.Mw)(o,s)},ut=async(e,t)=>{const s=e.body,n=Ht(s.Error,t),o=new fe({$metadata:S(e),...n});return(0,i.Mw)(o,s)},ft=async(e,t)=>{const s=e.body,n=jt(s.Error,t),o=new he({$metadata:S(e),...n});return(0,i.Mw)(o,s)},ht=async(e,t)=>{const s=e.body,n=Nt(s.Error,t),o=new ye({$metadata:S(e),...n});return(0,i.Mw)(o,s)},yt=(e,t)=>{const s={};if(e[L]!=null&&(s[L]=e[L]),e[Q]!=null&&(s[Q]=e[Q]),e[b]!=null){const n=ce(e[b],t);e[b]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,c])=>{const r=`PolicyArns.${o}`;s[r]=c})}if(e[_]!=null&&(s[_]=e[_]),e[g]!=null&&(s[g]=e[g]),e[Y]!=null){const n=cs(e[Y],t);e[Y]?.length===0&&(s.Tags=[]),Object.entries(n).forEach(([o,c])=>{const r=`Tags.${o}`;s[r]=c})}if(e[Ve]!=null){const n=bt(e[Ve],t);e[Ve]?.length===0&&(s.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,c])=>{const r=`TransitiveTagKeys.${o}`;s[r]=c})}if(e[be]!=null&&(s[be]=e[be]),e[J]!=null&&(s[J]=e[J]),e[q]!=null&&(s[q]=e[q]),e[p]!=null&&(s[p]=e[p]),e[ze]!=null){const n=vt(e[ze],t);e[ze]?.length===0&&(s.ProvidedContexts=[]),Object.entries(n).forEach(([o,c])=>{const r=`ProvidedContexts.${o}`;s[r]=c})}return s},gt=(e,t)=>{const s={};if(e[L]!=null&&(s[L]=e[L]),e[ke]!=null&&(s[ke]=e[ke]),e[Ue]!=null&&(s[Ue]=e[Ue]),e[b]!=null){const n=ce(e[b],t);e[b]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,c])=>{const r=`PolicyArns.${o}`;s[r]=c})}return e[_]!=null&&(s[_]=e[_]),e[g]!=null&&(s[g]=e[g]),s},At=(e,t)=>{const s={};if(e[L]!=null&&(s[L]=e[L]),e[Q]!=null&&(s[Q]=e[Q]),e[Qe]!=null&&(s[Qe]=e[Qe]),e[Fe]!=null&&(s[Fe]=e[Fe]),e[b]!=null){const n=ce(e[b],t);e[b]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,c])=>{const r=`PolicyArns.${o}`;s[r]=c})}return e[_]!=null&&(s[_]=e[_]),e[g]!=null&&(s[g]=e[g]),s},St=(e,t)=>{const s={};if(e[Be]!=null&&(s[Be]=e[Be]),e[as]!=null){const n=is(e[as],t);Object.entries(n).forEach(([o,c])=>{const r=`TaskPolicyArn.${o}`;s[r]=c})}return e[g]!=null&&(s[g]=e[g]),s},Et=(e,t)=>{const s={};return e[xe]!=null&&(s[xe]=e[xe]),s},Rt=(e,t)=>{const s={};return e[V]!=null&&(s[V]=e[V]),s},Ct=(e,t)=>({}),It=(e,t)=>{const s={};if(e[We]!=null&&(s[We]=e[We]),e[_]!=null&&(s[_]=e[_]),e[b]!=null){const n=ce(e[b],t);e[b]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,c])=>{const r=`PolicyArns.${o}`;s[r]=c})}if(e[g]!=null&&(s[g]=e[g]),e[Y]!=null){const n=cs(e[Y],t);e[Y]?.length===0&&(s.Tags=[]),Object.entries(n).forEach(([o,c])=>{const r=`Tags.${o}`;s[r]=c})}return s},pt=(e,t)=>{const s={};return e[g]!=null&&(s[g]=e[g]),e[J]!=null&&(s[J]=e[J]),e[q]!=null&&(s[q]=e[q]),s},ce=(e,t)=>{const s={};let n=1;for(const o of e){if(o===null)continue;const c=is(o,t);Object.entries(c).forEach(([r,h])=>{s[`member.${n}.${r}`]=h}),n++}return s},is=(e,t)=>{const s={};return e[Je]!=null&&(s[Je]=e[Je]),s},Pt=(e,t)=>{const s={};return e[Ke]!=null&&(s[Ke]=e[Ke]),e[Pe]!=null&&(s[Pe]=e[Pe]),s},vt=(e,t)=>{const s={};let n=1;for(const o of e){if(o===null)continue;const c=Pt(o,t);Object.entries(c).forEach(([r,h])=>{s[`member.${n}.${r}`]=h}),n++}return s},_t=(e,t)=>{const s={};return e[$e]!=null&&(s[$e]=e[$e]),e[Xe]!=null&&(s[Xe]=e[Xe]),s},bt=(e,t)=>{const s={};let n=1;for(const o of e)o!==null&&(s[`member.${n}`]=o,n++);return s},cs=(e,t)=>{const s={};let n=1;for(const o of e){if(o===null)continue;const c=_t(o,t);Object.entries(c).forEach(([r,h])=>{s[`member.${n}.${r}`]=h}),n++}return s},Ie=(e,t)=>{const s={};return e[pe]!=null&&(s[pe]=(0,i.lK)(e[pe])),e[F]!=null&&(s[F]=(0,i.lK)(e[F])),s},xt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=B(e[y],t)),e[z]!=null&&(s[z]=Ie(e[z],t)),e[x]!=null&&(s[x]=(0,i.xW)(e[x])),e[p]!=null&&(s[p]=(0,i.lK)(e[p])),s},Tt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=B(e[y],t)),e[z]!=null&&(s[z]=Ie(e[z],t)),e[x]!=null&&(s[x]=__strictParseInt32(e[x])),e[Ge]!=null&&(s[Ge]=__expectString(e[Ge])),e[je]!=null&&(s[je]=__expectString(e[je])),e[De]!=null&&(s[De]=__expectString(e[De])),e[X]!=null&&(s[X]=__expectString(e[X])),e[Me]!=null&&(s[Me]=__expectString(e[Me])),e[p]!=null&&(s[p]=__expectString(e[p])),s},wt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=B(e[y],t)),e[He]!=null&&(s[He]=(0,i.lK)(e[He])),e[z]!=null&&(s[z]=Ie(e[z],t)),e[x]!=null&&(s[x]=(0,i.xW)(e[x])),e[Le]!=null&&(s[Le]=(0,i.lK)(e[Le])),e[X]!=null&&(s[X]=(0,i.lK)(e[X])),e[p]!=null&&(s[p]=(0,i.lK)(e[p])),s},Dt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=B(e[y],t)),e[p]!=null&&(s[p]=__expectString(e[p])),s},B=(e,t)=>{const s={};return e[V]!=null&&(s[V]=(0,i.lK)(e[V])),e[Oe]!=null&&(s[Oe]=(0,i.lK)(e[Oe])),e[Ne]!=null&&(s[Ne]=(0,i.lK)(e[Ne])),e[_e]!=null&&(s[_e]=(0,i.Y0)((0,i.t_)(e[_e]))),s},$t=(e,t)=>{const s={};return e[ve]!=null&&(s[ve]=__expectString(e[ve])),s},Wt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Mt=(e,t)=>{const s={};return e[we]!=null&&(s[we]=__expectString(e[we])),e[F]!=null&&(s[F]=__expectString(e[F])),s},kt=(e,t)=>{const s={};return e[Z]!=null&&(s[Z]=__expectString(e[Z])),s},Kt=(e,t)=>{const s={};return e[Ze]!=null&&(s[Ze]=__expectString(e[Ze])),e[Z]!=null&&(s[Z]=__expectString(e[Z])),e[F]!=null&&(s[F]=__expectString(e[F])),s},zt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=B(e[y],t)),e[Te]!=null&&(s[Te]=Mt(e[Te],t)),e[x]!=null&&(s[x]=__strictParseInt32(e[x])),s},Ft=(e,t)=>{const s={};return e[y]!=null&&(s[y]=B(e[y],t)),s},Lt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Gt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ot=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ut=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ht=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},jt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Nt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},S=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),so=(e,t)=>collectBody(e,t).then(s=>t.utf8Encoder(s)),Bt=(0,i.jr)(T),W=async(e,t,s,n,o)=>{const{hostname:c,protocol:r="https",port:h,path:I}=await e.endpoint(),v={protocol:r,hostname:c,port:h,method:"POST",path:I.endsWith("/")?I.slice(0,-1)+s:I+s,headers:t};return n!==void 0&&(v.hostname=n),o!==void 0&&(v.body=o),new Ce.Kd(v)},M={"content-type":"application/x-www-form-urlencoded"},k="2011-06-15",K="Action",V="AccessKeyId",Vt="AssumeRole",pe="AssumedRoleId",z="AssumedRoleUser",Zt="AssumeRoleWithSAML",Xt="AssumeRoleWithWebIdentity",Qt="AssumeRoot",Z="Account",F="Arn",X="Audience",y="Credentials",Pe="ContextAssertion",Jt="DecodeAuthorizationMessage",ve="DecodedMessage",g="DurationSeconds",_e="Expiration",be="ExternalId",xe="EncodedMessage",Te="FederatedUser",we="FederatedUserId",Yt="GetAccessKeyInfo",qt="GetCallerIdentity",en="GetFederationToken",sn="GetSessionToken",De="Issuer",$e="Key",We="Name",Me="NameQualifier",_="Policy",b="PolicyArns",ke="PrincipalArn",Ke="ProviderArn",ze="ProvidedContexts",Fe="ProviderId",x="PackedPolicySize",Le="Provider",L="RoleArn",Q="RoleSessionName",Ge="Subject",Oe="SecretAccessKey",Ue="SAMLAssertion",He="SubjectFromWebIdentityToken",p="SourceIdentity",J="SerialNumber",je="SubjectType",Ne="SessionToken",Y="Tags",q="TokenCode",Be="TargetPrincipal",as="TaskPolicyArn",Ve="TransitiveTagKeys",Ze="UserId",G="Version",Xe="Value",Qe="WebIdentityToken",Je="arn",u="message",O=e=>Object.entries(e).map(([t,s])=>(0,i.$6)(t)+"="+(0,i.$6)(s)).join("&"),tn=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};class nn extends i.uB.classBuilder().ep(rs).m(function(t,s,n,o){return[(0,os.TM)(n,this.serialize,this.deserialize),(0,me.rD)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Js).ser(nt).de(rt).build(){}class on extends i.uB.classBuilder().ep(rs).m(function(t,s,n,o){return[(0,os.TM)(n,this.serialize,this.deserialize),(0,me.rD)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Ys,qs).ser(ot).de(it).build(){}const ds="us-east-1",ls=e=>{if(typeof e?.Arn=="string"){const t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},ms=async(e,t,s)=>{const n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t;return s?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${ds} (STS default)`),n??o??ds},us=(e,t)=>{let s,n;return async(o,c)=>{if(n=o,!s){const{logger:te=e?.parentClientConfig?.logger,region:ne,requestHandler:oe=e?.parentClientConfig?.requestHandler,credentialProviderLogger:ns}=e,Dn=await ms(ne,e?.parentClientConfig?.region,ns),$n=!hs(oe);s=new t({credentialDefaultProvider:()=>async()=>n,region:Dn,requestHandler:$n?oe:void 0,logger:te})}const{Credentials:r,AssumedRoleUser:h}=await s.send(new nn(c));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${c.RoleArn}`);const I=ls(h),v={accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration,...r.CredentialScope&&{credentialScope:r.CredentialScope},...I&&{accountId:I}};return(0,le.g)(v,"CREDENTIALS_STS_ASSUME_ROLE","i"),v}},fs=(e,t)=>{let s;return async n=>{if(!s){const{logger:I=e?.parentClientConfig?.logger,region:v,requestHandler:te=e?.parentClientConfig?.requestHandler,credentialProviderLogger:ne}=e,oe=await ms(v,e?.parentClientConfig?.region,ne),ns=!hs(te);s=new t({region:oe,requestHandler:ns?te:void 0,logger:I})}const{Credentials:o,AssumedRoleUser:c}=await s.send(new on(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);const r=ls(c),h={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...r&&{accountId:r}};return r&&(0,le.g)(h,"RESOLVED_ACCOUNT_ID","T"),(0,le.g)(h,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),h}},to=e=>t=>e({roleAssumer:us(t,t.stsClientCtor),roleAssumerWithWebIdentity:fs(t,t.stsClientCtor),...t}),hs=e=>e?.metadata?.handlerProtocol==="h2";var ys=d(9061),rn=d(91429),cn=d(15927),gs=d(55703),re=d(27437),ie=d(17457),an=d(76463),ae=d(52948),dn=d(15234),As=d(15249);const ln=async(e,t,s)=>({operation:(0,As.u)(t).operation,region:await(0,As.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function mn(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function Ss(e){return{schemeId:"smithy.api#noAuth"}}const un=e=>{const t=[];switch(e.operation){case"AssumeRoleWithSAML":{t.push(Ss(e));break}case"AssumeRoleWithWebIdentity":{t.push(Ss(e));break}default:t.push(mn(e))}return t},fn=e=>({...e,stsClientCtor:ts}),hn=e=>{const t=fn(e);return{...(0,dn.h)(t)}},yn={rE:"3.726.0"};var gn=d(82304),Es=d(36538),Rs=d(7559),Cs=d(97661),An=d(61695),ee=d(81949),Is=d(12001),Sn=d(44051),En=d(22309),Rn=d(19795),ps=d(20158),Ps=d(25643),Cn=d(79094),Ye=d(14399);const vs="required",a="type",l="fn",m="argv",U="ref",_s=!1,qe=!0,H="booleanEquals",E="stringEquals",bs="sigv4",xs="sts",Ts="us-east-1",f="endpoint",ws="https://sts.{Region}.{PartitionResult#dnsSuffix}",w="tree",se="error",es="getAttr",Ds={[vs]:!1,[a]:"String"},ss={[vs]:!0,default:!1,[a]:"Boolean"},$s={[U]:"Endpoint"},Ws={[l]:"isSet",[m]:[{[U]:"Region"}]},R={[U]:"Region"},Ms={[l]:"aws.partition",[m]:[R],assign:"PartitionResult"},ks={[U]:"UseFIPS"},Ks={[U]:"UseDualStack"},C={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:bs,signingName:xs,signingRegion:Ts}]},headers:{}},P={},zs={conditions:[{[l]:E,[m]:[R,"aws-global"]}],[f]:C,[a]:f},Fs={[l]:H,[m]:[ks,!0]},Ls={[l]:H,[m]:[Ks,!0]},Gs={[l]:es,[m]:[{[U]:"PartitionResult"},"supportsFIPS"]},Os={[U]:"PartitionResult"},Us={[l]:H,[m]:[!0,{[l]:es,[m]:[Os,"supportsDualStack"]}]},Hs=[{[l]:"isSet",[m]:[$s]}],js=[Fs],Ns=[Ls],In={version:"1.0",parameters:{Region:Ds,UseDualStack:ss,UseFIPS:ss,Endpoint:Ds,UseGlobalEndpoint:ss},rules:[{conditions:[{[l]:H,[m]:[{[U]:"UseGlobalEndpoint"},qe]},{[l]:"not",[m]:Hs},Ws,Ms,{[l]:H,[m]:[ks,_s]},{[l]:H,[m]:[Ks,_s]}],rules:[{conditions:[{[l]:E,[m]:[R,"ap-northeast-1"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"ap-south-1"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"ap-southeast-1"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"ap-southeast-2"]}],endpoint:C,[a]:f},zs,{conditions:[{[l]:E,[m]:[R,"ca-central-1"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"eu-central-1"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"eu-north-1"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"eu-west-1"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"eu-west-2"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"eu-west-3"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"sa-east-1"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,Ts]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"us-east-2"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"us-west-1"]}],endpoint:C,[a]:f},{conditions:[{[l]:E,[m]:[R,"us-west-2"]}],endpoint:C,[a]:f},{endpoint:{url:ws,properties:{authSchemes:[{name:bs,signingName:xs,signingRegion:"{Region}"}]},headers:P},[a]:f}],[a]:w},{conditions:Hs,rules:[{conditions:js,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[a]:se},{conditions:Ns,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[a]:se},{endpoint:{url:$s,properties:P,headers:P},[a]:f}],[a]:w},{conditions:[Ws],rules:[{conditions:[Ms],rules:[{conditions:[Fs,Ls],rules:[{conditions:[{[l]:H,[m]:[qe,Gs]},Us],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:P,headers:P},[a]:f}],[a]:w},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[a]:se}],[a]:w},{conditions:js,rules:[{conditions:[{[l]:H,[m]:[Gs,qe]}],rules:[{conditions:[{[l]:E,[m]:[{[l]:es,[m]:[Os,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:P,headers:P},[a]:f},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:P,headers:P},[a]:f}],[a]:w},{error:"FIPS is enabled but this partition does not support FIPS",[a]:se}],[a]:w},{conditions:Ns,rules:[{conditions:[Us],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:P,headers:P},[a]:f}],[a]:w},{error:"DualStack is enabled but this partition does not support DualStack",[a]:se}],[a]:w},zs,{endpoint:{url:ws,properties:P,headers:P},[a]:f}],[a]:w}],[a]:w},{error:"Invalid Configuration: Missing Region",[a]:se}]},pn=new Ye.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),Pn=(e,t={})=>pn.get(e,()=>(0,Ye.sO)(In,{endpointParams:e,logger:t.logger}));Ye.mw.aws=Cn.UF;const vn=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??ps.E,base64Encoder:e?.base64Encoder??ps.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Pn,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??un,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Es.f2},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ie.mR}],logger:e?.logger??new i.N4,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Rn.D,utf8Decoder:e?.utf8Decoder??Ps.ar,utf8Encoder:e?.utf8Encoder??Ps.Pq});var _n=d(19919);const bn=e=>{(0,i.I9)(process.version);const t=(0,_n.I)(e),s=()=>t().then(i.lT),n=vn(e);(0,gn.I)(process.version);const o={profile:e?.profile};return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Sn.n,credentialDefaultProvider:e?.credentialDefaultProvider??Rs.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Cs.pf)({serviceId:n.serviceId,clientVersion:yn.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:c=>c.getIdentityProvider("aws.auth#sigv4")||(async r=>await(0,Rs.v6)(r?.__config||{})()),signer:new Es.f2},{schemeId:"smithy.api#noAuth",identityProvider:c=>c.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ie.mR}],maxAttempts:e?.maxAttempts??(0,ee.Z)(ae.qs,e),region:e?.region??(0,ee.Z)(re.GG,{...re.zH,...o}),requestHandler:Is.$c.create(e?.requestHandler??s),retryMode:e?.retryMode??(0,ee.Z)({...ae.kN,default:async()=>(await s()).retryMode||En.L0},e),sha256:e?.sha256??An.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Is.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ee.Z)(re.e$,o),useFipsEndpoint:e?.useFipsEndpoint??(0,ee.Z)(re.Ko,o),userAgentAppId:e?.userAgentAppId??(0,ee.Z)(Cs.hV,o)}};var Bs=d(85278);const xn=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const c=t.findIndex(r=>r.schemeId===o.schemeId);c===-1?t.push(o):t.splice(c,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){s=o},httpAuthSchemeProvider(){return s},setCredentials(o){n=o},credentials(){return n}}},Tn=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),de=e=>e,wn=(e,t)=>{const s={...de((0,Bs.Rq)(e)),...de((0,i.xA)(e)),...de((0,Ce.eS)(e)),...de(xn(e))};return t.forEach(n=>n.configure(s)),{...e,...(0,Bs.$3)(s),...(0,i.uv)(s),...(0,Ce.jt)(s),...Tn(s)}};class ts extends i.Kj{constructor(...[s]){const n=bn(s||{}),o=Qs(n),c=(0,gs.Dc)(o),r=(0,ae.$z)(c),h=(0,re.TD)(r),I=(0,ys.OV)(h),v=(0,me.Co)(I),te=hn(v),ne=wn(te,s?.extensions||[]);super(ne);A(this,"config");this.config=ne,this.middlewareStack.use((0,gs.sM)(this.config)),this.middlewareStack.use((0,ae.ey)(this.config)),this.middlewareStack.use((0,an.vK)(this.config)),this.middlewareStack.use((0,ys.TC)(this.config)),this.middlewareStack.use((0,rn.Y7)(this.config)),this.middlewareStack.use((0,cn.n4)(this.config)),this.middlewareStack.use((0,ie.wB)(this.config,{httpAuthSchemeParametersProvider:ln,identityProviderConfigProvider:async oe=>new ie.h$({"aws.auth#sigv4":oe.credentials})})),this.middlewareStack.use((0,ie.lW)(this.config))}destroy(){super.destroy()}}const Vs=(e,t)=>t?class extends e{constructor(n){super(n);for(const o of t)this.middlewareStack.use(o)}}:e,Zs=(e={},t)=>us(e,Vs(ts,t)),Xs=(e={},t)=>fs(e,Vs(ts,t)),oo=e=>t=>e({roleAssumer:Zs(t),roleAssumerWithWebIdentity:Xs(t),...t})}};
